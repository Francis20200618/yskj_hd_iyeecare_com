(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bb44"],{"1Rt+":function(t,e,s){"use strict";var i=s("V0Qf");s.n(i).a},CG8e:function(t,e,s){"use strict";var i=s("eFYf");s.n(i).a},"Cd/n":function(t,e,s){"use strict";s.r(e);var i=s("QbLZ"),o=s.n(i),a=s("RCcY"),n=s("L2JU"),r={props:{defaultActive:{type:String,default:"1"}},data:function(){return{router_list:[{category_id:"1",category_title:"系统设置",routers:[]}]}},components:{sideItem:a.a},computed:o()({},Object(n.b)(["permission_routers","userInfo"]),{allChecked:function(){return this.todos.every(function(t){return t.done})}}),watch:{permission_routers:function(t,e){this.signRouters(t)}},mounted:function(){this.signRouters()},methods:{signRouters:function(t){var e=(t||this.permission_routers).filter(function(t){return"posHome"===t.name});e[0]&&this.router_list.map(function(t){e[0].children.map(function(e){e.class_id==t.category_id&&t.routers.push(e)})})}}},c=(s("1Rt+"),s("KHd+")),l=Object(c.a)(r,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"second-side-box"},[e("div",{staticStyle:{width:"150px"}}),this._v(" "),e("div",{staticClass:"second-side-box-fixed"},[e("div",{staticClass:"title"},[this._v("系统设置")])])])}],!1,null,"8a4eee9e",null);l.options.__file="shop_pos.vue";var u={data:function(){return{goodsId:"",open_state:!1,form:{uid:""},member_search_options:[{value:"mobile",label:"手机号码"},{value:"uid",label:"会员ID"}],member_search_value:"mobile",member_search_label:"手机号码",member_keyword:"",member_show:!1,member_list:[],rules:{uid:[{required:!0,message:"请项为必填项",trigger:"blur"}]},contact_notice_url:""}},mounted:function(){this.getData()},methods:{lineTo:function(){window.open(this.contact_notice_url)},getData:function(){var t=this;$http.pc_post("plugin/ShopPos/getSetting",{}).then(function(e){e.result?(console.log(e.data.setting),t.goodsId=e.data.setting.bind_goods_id,t.form.uid=e.data.setting.bind_uid,t.open_state=1==e.data.setting.open_state,t.contact_notice_url=e.data.setting.front_url,t.choosed_member={avatar_image:e.data.setting.bind_member.avatar,nickname:e.data.setting.bind_member.nickname}):t.$message({type:"error",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})})},tapSave:function(){var t=this,e={open_state:this.open_state?1:0,bind_uid:this.form.uid,bind_goods_id:this.goodsId};$http.pc_post("plugin/ShopPos/editSetting",e).then(function(e){e.result?(console.log(e.data),t.$message({type:"success",message:e.msg})):t.$message({type:"error",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})})},chooseMember:function(t){this.choosed_member=t,this.form.uid=t.uid,this.member_show=!1,console.log(this.form)},goBack:function(){this.$router.go(-1)},memberChange:function(t){var e=this.member_search_options.find(function(e){return e.value==t});this.member_search_label=e.label},openMember:function(){this.member_show=!0},clearMember:function(){this.choosed_member={},this.form.uid="",this.$forceUpdate()},getMember:function(){var t=this;$http.pc_post("plugin/ShopPos/searchMember",{search:this.member_keyword,search_type:this.member_search_value}).then(function(e){e.result?t.member_list=e.data:t.$message({type:"error",message:e.msg})},function(e){t.$message({type:"error",message:e.msg})})},copyLink:function(t){this.$refs[t].select(),console.log(this.$refs[t]),document.execCommand("Copy"),this.$message.success("复制成功!")}},components:{shop_pos_side:l.exports}},d=(s("CG8e"),Object(c.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"indexPage"}},[s("shop_pos_side",{attrs:{defaultActive:"1"}}),t._v(" "),s("div",{attrs:{id:"app"}},[s("div",{staticClass:"vue-head"},[t._m(0),t._v(" "),s("div",{staticClass:"vue-main"},[s("div",{staticClass:"cell"},[s("div",{staticClass:"txt"},[t._v("插件开关")]),t._v(" "),s("div",{staticClass:"right"},[s("el-switch",{attrs:{"active-color":"#29BA9C"},model:{value:t.open_state,callback:function(e){t.open_state=e},expression:"open_state"}})],1)]),t._v(" "),s("div",{staticClass:"cell"},[s("div",{staticClass:"txt"},[t._v("POS收银链接")]),t._v(" "),s("div",{staticClass:"right"},[s("el-button",{attrs:{type:"info"},on:{click:t.lineTo}},[t._v(" 打开 ")]),t._v(" "),s("el-button",{on:{click:function(e){t.copyLink("contact_notice_url")}}},[t._v("复制")])],1)]),t._v(" "),s("div",{staticClass:"cell"},[s("div",{staticClass:"txt"},[t._v("绑定扫码买单商品id")]),t._v(" "),s("div",{staticClass:"right"},[s("el-input",{model:{value:t.goodsId,callback:function(e){t.goodsId=e},expression:"goodsId"}})],1)]),t._v(" "),s("div",{staticClass:"cell"},[s("div",{staticClass:"txt"},[t._v("会员")]),t._v(" "),s("div",{staticClass:"right"},[t.form.uid?t._e():s("div",{staticClass:"upload-box",on:{click:t.openMember}},[t._m(1)]),t._v(" "),t.form.uid?s("div",{staticClass:"upload-boxed"},[s("img",{staticStyle:{width:"150px",height:"150px","border-radius":"5px",cursor:"pointer"},attrs:{src:t.choosed_member.avatar_image,alt:""},on:{click:t.openMember}}),t._v(" "),s("div",{staticClass:"upload-boxed-text"},[t._v("重新选择")]),t._v(" "),s("div",{staticClass:"upload-boxed-text-clear",on:{click:function(e){t.clearMember("uid")}}},[t._v("\n                清除选择\n              ")]),t._v(" "),s("div",{staticStyle:{"text-align":"center","line-height":"20px"}},[t._v("\n                "+t._s(t.choosed_member.nickname)+"\n              ")])]):t._e()])]),t._v(" "),s("div",{staticClass:"saveBtn"},[s("el-button",{attrs:{type:"info"},on:{click:t.tapSave}},[t._v("保存")])],1),t._v(" "),s("el-input",{ref:"contact_notice_url",staticStyle:{opacity:"0",position:"absolute",bottom:"0",left:"0"},model:{value:t.contact_notice_url,callback:function(e){t.contact_notice_url=e},expression:"contact_notice_url"}})],1)])]),t._v(" "),s("el-dialog",{attrs:{title:"选择会员",visible:t.member_show,width:"60%"},on:{"update:visible":function(e){t.member_show=e}}},[s("div",[s("el-select",{attrs:{placeholder:"请选择"},on:{change:t.memberChange},model:{value:t.member_search_value,callback:function(e){t.member_search_value=e},expression:"member_search_value"}},t._l(t.member_search_options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),s("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入"+t.member_search_label},model:{value:t.member_keyword,callback:function(e){t.member_keyword=e},expression:"member_keyword"}}),t._v(" "),s("el-button",{on:{click:t.getMember}},[t._v("搜索")])],1),t._v(" "),s("el-table",{staticStyle:{width:"100%",height:"500px",overflow:"auto"},attrs:{data:t.member_list}},[s("el-table-column",{attrs:{label:"ID",prop:"uid",align:"center",width:"100px"}}),t._v(" "),s("el-table-column",{attrs:{label:"会员信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticStyle:{display:"flex","align-items":"center"}},[e.row.avatar_image?s("div",{staticStyle:{width:"40px"}},[s("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:e.row.avatar_image,alt:""}})],1):t._e(),t._v(" "),s("div",{staticStyle:{flex:"1"}},[t._v("\n              【id:"+t._s(e.row.uid)+"】"+t._s(e.row.nickname)+"\n            ")])])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"refund_time",label:"操作",align:"center",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{on:{click:function(s){t.chooseMember(e.row)}}},[t._v(" 选择 ")])]}}])})],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.member_show=!1}}},[t._v("取 消")])],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-main-title",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"vue-main-title-left"}),this._v(" "),e("div",{staticClass:"vue-main-title-content"},[this._v("基础设置")]),this._v(" "),e("div",{staticClass:"vue-main-title-button"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"upload-box-member"},[e("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"32px",color:"#000"}}),e("br"),this._v("\n                选 择\n              ")])}],!1,null,"1a0e3203",null));d.options.__file="index.vue";e.default=d.exports},V0Qf:function(t,e,s){},eFYf:function(t,e,s){}}]);