(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1ff4"],{"163y":function(e,t,r){"use strict";var n=r("VMPX");r.n(n).a},VMPX:function(e,t,r){},lZ3c:function(e,t,r){"use strict";r.r(t);var n={data:function(){return{showWarning:!1,href:"",visible:!1,list:[],list2:[],pageSize:0,current_page:0,total:0,mobile:"",form:{tel:"",name:"",sms_code:""},count:0,timer:null,search_form:{},dialogTableVisible:!1,rules:{}}},created:function(){this.mobile=localStorage.getItem("siteMobile"),this.currentChange(),this.href=this.fun.getSiteRoot()+"/#/real_people?i="+this.fun.getKeyByI()},destroyed:function(){},methods:{onCopy:function(e){this.$message.success("复制成功")},onError:function(e){this.$message.error("复制失败")},clear:function(){this.showWarning=!1,this.visible=!1,this.dialogTableVisible=!1,this.form={tel:"",name:"",sms_code:""}},handleSelect:function(e){this.form.uid=e.uid,this.form.tel=e.mobile,e.realname&&(this.form.name=e.realname)},getData:function(){var e=this;this.form.tel?$http.get("plugin.yun-sign.frontend.member.query-list",{keyword:this.form.tel}).then(function(t){1===t.result?(e.visible=!0,e.list2=t.data):e.$message.error(t.msg)}).catch(function(e){console.error(e)}):this.visible=!1},sureAdd:function(){var e=this;this.form.sms_code?$http.get("plugin.yun-sign.frontend.worker.add-worker",this.form).then(function(t){1===t.result?(e.dialogTableVisible=!1,e.form={tel:"",name:"",sms_code:""},e.currentChange(e.current_page),e.$message.success(t.msg)):e.$message.error(t.msg)}).catch(function(e){console.error(e)}):this.$message.error("请输入验证码")},sendCode:function(){var e=this;this.form.tel?this.form.name?$http.post("plugin.yun-sign.frontend.worker.add-worker-sms",{tel:this.form.tel,name:this.form.name},"loading").then(function(t){if(1===t.result)if(1==t.data.auth_status){e.timer||(e.count=60,e.timer=setInterval(function(){e.count>0&&e.count<=60?e.count--:(clearInterval(e.timer),e.timer=null)},1e3))}else e.showWarning=!0;else t.msg&&e.$message.error(t.msg)}).catch(function(e){console.log(e)}):this.$message.error("请先输入员工姓名"):this.$message.error("请先输入员工手机号")},currentChange:function(e){var t=this;$http.post("plugin.yun-sign.frontend.worker.get-list",{page:e,name:this.search_form.name,tel:this.search_form.tel},"loading").then(function(e){1===e.result?(t.total=e.data.total,t.pageSize=e.data.per_page,t.list=e.data.data,t.current_page=e.data.current_page):(t.list=[],-1===e.data.status&&t.currentChange(1),t.$message.error(e.msg))}).catch(function(e){console.error(e)})},delRow:function(e){var t=this;this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteIt(e)}).catch(function(){})},deleteIt:function(e){var t=this;$http.post("plugin.yun-sign.frontend.worker.del-worker",{id:e},"loading").then(function(e){1===e.result?(t.$message.success("删除成功"),t.currentChange(t.current_page)):e.msg&&t.$message.error(e.msg)}).catch(function(e){console.log(e)})}}},a=(r("163y"),r("ZrdR")),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"right"},[r("div",{staticClass:"right-head"},[r("el-form",{ref:"search_form",attrs:{inline:!0,model:e.search_form}},[r("el-row",[r("el-col",{attrs:{span:17}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.search_form.name,callback:function(t){e.$set(e.search_form,"name",t)},expression:"search_form.name"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.search_form.tel,callback:function(t){e.$set(e.search_form,"tel",t)},expression:"search_form.tel"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6,align:"right"}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.currentChange(1)}}},[e._v("查询\n            ")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("添加员工\n            ")])],1)],1)],1)],1)],1),e._v(" "),[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[r("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"has_one_member.mobile",label:"手机号",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1!=t.row.role_id?r("el-button",{attrs:{type:"danger"},on:{click:function(r){e.delRow(t.row.id)}}},[e._v("删除\n          ")]):e._e()]}}])})],1),e._v(" "),r("el-col",{staticStyle:{padding:"15px 5% 15px 0"},attrs:{span:24,align:"right"}},[r("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.current_page,"page-size":e.pageSize,total:e.total,background:""},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current_page=t}}})],1)],e._v(" "),r("el-dialog",{attrs:{title:"添加员工信息",visible:e.dialogTableVisible,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"20%"}},[r("el-form-item",{attrs:{label:"员工手机号",prop:"mobile"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入员工手机号"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"员工姓名",prop:"new_pwd"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{type:"text",placeholder:"请输入员工姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"法定代表人手机号",prop:"name"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{type:"text",disabled:""},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"again_pwd"}},[r("el-input",{staticStyle:{width:"55%"},attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.form.sms_code,callback:function(t){e.$set(e.form,"sms_code",t)},expression:"form.sms_code"}}),e._v(" "),0==e.count?r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.sendCode}},[e._v("获取手机验证码")]):e._e(),e._v(" "),0!=e.count?r("el-button",{attrs:{type:"primary",disabled:"",size:"small"}},[e._v(e._s(e.count)+" 秒后重新获取")]):e._e()],1),e._v(" "),e.showWarning?r("el-form-item",[r("div",{staticClass:"warning"},[e._v("该用户未完成个人实名认证，为了保证合同签署的合法有效，请通知该用户先完成个人实名认证再进行添加。"),r("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.href,expression:"href",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"link"},[e._v("点击复制实名认证链接")])])]):e._e()],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.clear}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sureAdd()}}},[e._v("确 定")])],1)],1)],2)},[],!1,null,"c747e32a",null);o.options.__file="staff_management.vue";t.default=o.exports}}]);