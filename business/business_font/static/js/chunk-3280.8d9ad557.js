(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3280"],{"/f1G":function(t,e,a){t.exports={default:a("nhzr"),__esModule:!0}},"/s/L":function(t,e,a){"use strict";a.r(e);var s=a("FyfS"),n=a.n(s),i=a("EJiy"),o=a.n(i),r=a("QbLZ"),l=a.n(r),c=a("/f1G"),u=a.n(c),_=a("14Xm"),p=a.n(_),d=a("gDS+"),f=a.n(d),m=a("D3Ub"),v=a.n(m),h=a("fb88"),b=a("IFkG"),g=a("TXmZ"),k={components:{sop_manage_side:h.a,tag_dialog:b.a,content_card:g.a},data:function(){return{search:{task_type:1,name:"",is_open:1,execution_type:[],task_set:{tag_list:[],send_time_type:1,send_time:""}},date:"",couponDialogVisible:!1,tag_axios_url:"plugin/SopTask/getTagList",dataShowList:[],testSlogan:"感谢您的关注，我们将竭诚为您服务!",nicknameList:[{name:"客户昵称",value:"{{客户昵称}}"}],styleContext:{position:"absolute",right:0,top:"-120px",height:"622px"},avatar:"",info_show:!0,info_save:!1}},mounted:function(){this.$route.query.id&&this.editDataShow()},methods:{editDataShow:function(){var t=this;return v()(p.a.mark(function e(){var a,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.info_show=!1,e.next=3,$http.pc_post("plugin/SopTask/getTaskDetail",{id:t.$route.query.id});case 3:1==(a=e.sent).result?(t.dataShowList=a.data.content_list,s=JSON.parse(f()(a.data)),t.date=[s.task_set.start_time,s.task_set.end_time],delete s.content_list,delete s.created_at,delete s.task_set.start_time,delete s.task_set.end_time,t.search=s,t.info_show=!0):(t.info_show=!0,t.$message.error(a.msg));case 5:case"end":return e.stop()}},e,t)}))()},selectTag:function(){this.couponDialogVisible=!0},couponChangeVisible:function(t){this.couponDialogVisible=t},couponOptionData:function(t){u()(t.data).length>0&&(0==this.search.task_set.tag_list.filter(function(e){return e.id==t.data.id}).length&&this.search.task_set.tag_list.push(t.data))},delTagContext:function(t){this.search.task_set.tag_list.splice(t,1)},submit:function(){var t=this;return v()(p.a.mark(function e(){var a,s,i,r,c,u,_,d,m,v;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.info_save){e.next=2;break}return e.abrupt("return");case 2:return t.info_save=!0,(a=l()({},JSON.parse(f()(t.search)),{content_list:t.$refs.content_card.submitData})).task_set.start_time=""!==t.date?t.date[0]:"",a.task_set.end_time=""!==t.date?t.date[1]:"",2==t.search.task_set.send_time_type&&(a.task_set.send_time=""),e.next=8,$http.pc_post("plugin/SopTask/saveTask",{id:t.$route.query.id?t.$route.query.id:"",form:a});case 8:if(!(s=e.sent).result){e.next=15;break}t.$message.success(s.msg),t.$router.push(t.fun.getUrl("memberSop",{},{})),t.info_save=!1,e.next=46;break;case 15:if(i=[],"object"!=o()(s.msg)){e.next=44;break}e.t0=p.a.keys(s.msg);case 18:if((e.t1=e.t0()).done){e.next=41;break}for(r=e.t1.value,c=!0,u=!1,_=void 0,e.prev=23,d=n()(s.msg[r]);!(c=(m=d.next()).done);c=!0)v=m.value,i.push(v);e.next=31;break;case 27:e.prev=27,e.t2=e.catch(23),u=!0,_=e.t2;case 31:e.prev=31,e.prev=32,!c&&d.return&&d.return();case 34:if(e.prev=34,!u){e.next=37;break}throw _;case 37:return e.finish(34);case 38:return e.finish(31);case 39:e.next=18;break;case 41:t.$message.error(i.toString()),e.next=45;break;case 44:t.$message.error(s.msg);case 45:t.info_save=!1;case 46:case"end":return e.stop()}},e,t,[[23,27,31,39],[32,,34,38]])}))()}}},x=(a("FO/o"),a("KHd+")),y=Object(x.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all"},[a("sop_manage_side",{attrs:{defaultActive:"memberSop"}}),t._v(" "),a("div",{staticStyle:{width:"calc(100% - 150px)"},attrs:{id:"app"}},[a("div",{staticClass:"news-sop"},[t._m(0),t._v(" "),a("div",{staticClass:"vue-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"任务名称"}},[a("el-input",{staticStyle:{width:"30%"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否开启"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.search.is_open,callback:function(e){t.$set(t.search,"is_open",e)},expression:"search.is_open"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择执行人"}},[a("el-checkbox-group",{model:{value:t.search.execution_type,callback:function(e){t.$set(t.search,"execution_type",e)},expression:"search.execution_type"}},[a("el-checkbox",{attrs:{label:1}},[t._v("关系链上级第一位成员")]),t._v(" "),a("el-checkbox",{attrs:{label:2}},[t._v("首次添加企业微信成员")]),t._v(" "),a("el-checkbox",{attrs:{label:3}},[t._v("随机抽选一位成员")])],1),t._v(" "),a("div",{staticClass:"tip"},[t._v("优先级从左到右")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"news-sop"},[t._m(1),t._v(" "),a("div",{staticClass:"vue-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"任务条件"}},[a("el-button",{attrs:{type:"plain",size:"medium"},on:{click:t.selectTag}},[a("i",{staticClass:"el-icon-plus"}),t._v("选择标签")]),t._v(" "),a("div",{staticClass:"tip"},[t._v("拥有选择标签的用户则是达成任务条件,每个标签用户只执行一次")])],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("div",{staticClass:"tag-card"},t._l(t.search.task_set.tag_list,function(e,s){return a("span",{key:s,staticClass:"tag-context"},[a("i",{staticClass:"el-icon-close",on:{click:function(e){t.delTagContext(s)}}}),t._v(t._s(e.name))])}))]),t._v(" "),a("el-form-item",{attrs:{label:"任务时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推送时间"}},[a("el-radio",{attrs:{label:1},model:{value:t.search.task_set.send_time_type,callback:function(e){t.$set(t.search.task_set,"send_time_type",e)},expression:"search.task_set.send_time_type"}},[t._v("固定时间")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.search.task_set.send_time_type,callback:function(e){t.$set(t.search.task_set,"send_time_type",e)},expression:"search.task_set.send_time_type"}},[t._v("达成任务条件推送")]),t._v(" "),a("div",{staticClass:"tip"},[t._v("设置时间推送通知执行人")]),t._v(" "),1===t.search.task_set.send_time_type?a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:t.search.task_set.send_time,callback:function(e){t.$set(t.search.task_set,"send_time",e)},expression:"search.task_set.send_time"}},[a("el-option",{attrs:{label:"每天0:00",value:"0:00"}}),t._v(" "),t._l(24,function(t){return a("el-option",{key:t,attrs:{label:"每天"+t+":00",value:t+":00"}})})],2):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"任务内容设置"}}),t._v(" "),a("el-form-item",{attrs:{label:" ","label-width":"45px"}},[t.info_show?a("content_card",{ref:"content_card",attrs:{textState:"more",avatar:t.avatar,testSlogan:t.testSlogan,nicknameList:t.nicknameList,dataShowList:t.dataShowList,styleContext:t.styleContext}}):t._e()],1)],1)],1)]),t._v(" "),a("div",{staticClass:"sendButtons"},[a("el-button",{staticStyle:{background:"#5ab79c","border-color":"#5ab79c"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)]),t._v(" "),a("tag_dialog",{attrs:{couponDialogVisible:t.couponDialogVisible,axios_url:t.tag_axios_url},on:{couponChangeVisible:t.couponChangeVisible,couponOptionData:t.couponOptionData}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-main-title"},[e("div",{staticClass:"vue-main-title-left"}),this._v(" "),e("div",{staticClass:"vue-main-title-content"},[this._v("基础设置")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-main-title"},[e("div",{staticClass:"vue-main-title-left"}),this._v(" "),e("div",{staticClass:"vue-main-title-content"},[this._v("任务设置")])])}],!1,null,"81065b12",null);y.options.__file="member_sop_editor.vue";e.default=y.exports},DKiO:function(t,e,a){"use strict";var s=a("LXii");a.n(s).a},E8gZ:function(t,e,a){var s=a("jmDH"),n=a("w6GO"),i=a("NsO/"),o=a("NV0k").f;t.exports=function(t){return function(e){for(var a,r=i(e),l=n(r),c=l.length,u=0,_=[];c>u;)a=l[u++],s&&!o.call(r,a)||_.push(t?[a,r[a]]:r[a]);return _}}},"FO/o":function(t,e,a){"use strict";var s=a("cOzH");a.n(s).a},IFkG:function(t,e,a){"use strict";var s=a("14Xm"),n=a.n(s),i=a("QbLZ"),o=a.n(i),r=a("D3Ub"),l=a.n(r),c={props:{couponDialogVisible:{type:Boolean,default:!1},axios_url:{type:String,default:""},tagtype:{type:String,default:"标签"}},components:{},data:function(){return{search:{name:""},tableData:[],oneShow:!1}},computed:{},created:function(){},mounted:function(){this.getTagList(),console.log(this.axios_url,"this.axios_url")},methods:{searchs:function(t){this.getTagList()},select:function(t){t&&this.$emit("couponOptionData",{data:t,name:this.tagtype}),this.$emit("couponChangeVisible",!1)},getTagList:function(){var t=this;return l()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$http.pc_post(t.axios_url,o()({},t.search));case 2:1==(a=e.sent).result?(t.tableData=a.data,t.oneShow||t.$emit("tagDataList",t.tableData),t.oneShow=!0):(t.$message.error(a.msg),t.oneShow=!0);case 4:case"end":return e.stop()}},e,t)}))()}}},u=(a("DKiO"),a("KHd+")),_=Object(u.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tag-dialog"}},[a("el-dialog",{attrs:{center:"",title:"选择"+t.tagtype,visible:t.couponDialogVisible,"before-close":t.select,width:"50%"},on:{"update:visible":function(e){t.couponDialogVisible=e}}},[a("div",{staticStyle:{display:"flex",width:"95%"}},[a("el-input",{attrs:{placeholder:""+t.tagtype=="tag"?"请输入"+t.tagtype+"名或者标签组名":"请输入"+t.tagtype+"名"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){t.searchs(1)}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%",height:"500px","overflow-y":"auto"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:t.tagtype+"名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:""},on:{click:function(a){t.select(e.row)}}},[t._v("选择")])]}}])})],1)],1)],1)},[],!1,null,"19e20294",null);_.options.__file="tag_dialog.vue";e.a=_.exports},LXii:function(t,e,a){},"RU/L":function(t,e,a){a("Rqdy");var s=a("WEpk").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var s=a("Y7ZC");s(s.S+s.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var s=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,s.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},bZdz:function(t,e,a){t.exports=a.p+"static/img/welcome_top.d6767fe.png"},cOzH:function(t,e,a){},fW1p:function(t,e,a){var s=a("Y7ZC"),n=a("E8gZ")(!1);s(s.S,"Object",{values:function(t){return n(t)}})},nhzr:function(t,e,a){a("fW1p"),t.exports=a("WEpk").Object.values}}]);