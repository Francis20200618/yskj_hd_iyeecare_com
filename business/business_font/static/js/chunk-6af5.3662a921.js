(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6af5"],{Ajro:function(t,e,a){"use strict";a.r(e);a("LKdb");var n={components:{},data:function(){return{dialogVisible:!1,list:[],list2:[],worker_ids:[],pageSize:0,current_page:0,total:0,pageSize2:0,current_page2:0,total2:0,company:{},kwd:"",ruleForm:{name:""}}},watch:{},created:function(){this.id=this.$route.params.id,this.getData(),this.currentChange(1)},destroyed:function(){},methods:{handleSelectionChange:function(t){this.multipleSelection=t;var e=[];this.multipleSelection=this.multipleSelection.map(function(t){e.push(t.id)}),this.worker_ids=e.join(",")},cancelIt:function(){this.dialogVisible=!1,this.kwd=""},handleDelete:function(t){var e=this;$http.post("plugin.yun-sign.frontend.worker.delete-seal-auth",{id:t},"loading").then(function(t){1===t.result?(e.$message.success("删除成功"),e.currentChange(e.current_page)):t.msg&&e.$message.error(t.msg)}).catch(function(t){console.log(t)})},sureAdd:function(){var t=this;$http.post("plugin.yun-sign.frontend.worker.add-seal-auth",{seal_id:this.id,worker_ids:this.worker_ids},"loading").then(function(e){1===e.result?(t.dialogVisible=!1,t.$message.success("添加成功"),t.currentChange(t.current_page)):e.msg&&t.$message.error(e.msg)}).catch(function(t){console.log(t)})},getData:function(){var t=this;$http.post("plugin.yun-sign.frontend.company-seal.detail",{id:this.id},"loading").then(function(e){1===e.result?t.company=e.data:e.msg&&t.$message.error(e.msg)}).catch(function(t){console.log(t)})},currentChange:function(t){var e=this;$http.post("plugin.yun-sign.frontend.worker.get-seal-auth-worker",{page:t,seal_id:this.id},"loading").then(function(t){1===t.result?(e.total=t.data.total,e.pageSize=t.data.per_page,e.list=t.data.data,e.current_page=t.data.current_page):(e.list=[],-1===t.data.status&&e.currentChange(1),e.$message.error(t.msg)),e.loading=!1}).catch(function(t){e.loading=!1,console.error(t)})},currentChange2:function(t){var e=this;$http.post("plugin.yun-sign.frontend.worker.get-none-seal-auth-worker",{page:t,seal_id:this.id,kwd:this.kwd},"loading").then(function(t){1===t.result?(e.dialogVisible=!0,e.total2=t.data.total,e.pageSize2=t.data.per_page,e.list2=t.data.data,e.current_page2=t.data.current_page):(e.list2=[],-1===t.data.status&&e.currentChange2(1),e.$message.error(t.msg)),e.loading=!1}).catch(function(t){e.loading=!1,console.error(t)})}}},i=(a("R2m9"),a("ZrdR")),r=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sign"}},[a("div",{staticClass:"box"},[t._m(0),t._v(" "),a("div",{staticStyle:{"padding-right":"50px"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"label-width":"120px"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("el-form-item",{attrs:{label:"印章名称",prop:"name"}},[a("p",{staticStyle:{"margin-left":"40px"}},[t._v(t._s(t.company.name))])]),t._v(" "),a("el-form-item",{attrs:{label:"效果预览"}},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.company.seal_url,alt:""}})])])],1)],1)]),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"right-head"},[a("div",{staticClass:"right-head-con"},[a("p",{staticStyle:{flex:"1"}},[t._v("印章持有人")]),t._v(" "),a("div",{staticStyle:{flex:"0 0 140px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.currentChange2(1)}}},[t._v("新增印章持有人")])],1)])]),t._v(" "),a("div",{staticStyle:{padding:"0 10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{label:"印章持有人","min-width":"150",prop:"has_one_worker.name"}}),t._v(" "),a("el-table-column",{attrs:{label:"手机号","min-width":"150",prop:"has_one_worker.has_one_member.mobile"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.has_one_worker.role_id?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.row.id)}}},[t._v("删除\n            ")]):t._e()]}}])})],1)],1),t._v(" "),a("el-col",{staticStyle:{padding:"15px 5% 15px 0"},attrs:{span:24,align:"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.current_page,"page-size":t.pageSize,total:t.total,background:""},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.current_page=e}}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增印章持有人",visible:t.dialogVisible,width:"700px","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticStyle:{padding:"0 30px"}},[a("div",{staticClass:"search"},[a("el-input",{staticStyle:{width:"70%","margin-right":"5%"},attrs:{placeholder:"输入员工姓名"},model:{value:t.kwd,callback:function(e){t.kwd=e},expression:"kwd"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.currentChange2(1)}}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"pop-table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.list2,"tooltip-effect":"dark",border:!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"has_one_member.mobile",label:"手机号"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{padding:"15px 5% 15px 0"},attrs:{span:24,align:"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":t.current_page,"page-size":t.pageSize,total:t.total,background:""},on:{"current-change":t.currentChange2,"update:currentPage":function(e){t.current_page=e}}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelIt}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureAdd}},[t._v("确 定")])],1)])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right-head"},[e("div",{staticClass:"right-head-con"},[this._v("印章基本信息")])])}],!1,null,"14049b0b",null);r.options.__file="company_seal.vue";e.default=r.exports},R2m9:function(t,e,a){"use strict";var n=a("bMPG");a.n(n).a},bMPG:function(t,e,a){}}]);