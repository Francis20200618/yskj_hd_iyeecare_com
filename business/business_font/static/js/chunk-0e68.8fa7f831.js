(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0e68"],{"3fKN":function(e,t,a){},PEVR:function(e,t,a){"use strict";a.r(t);var n={data:function(){return{list:[],times:[],search_form:{nickname:"",member_kwd:"",group_id:""},change_pwd_show:!1,change_pwd_form:{password:"",confirm_password:""},summary:{},edit_obj:{},rules:{},current_page:1,total:1,per_page:1,group_list:[]}},created:function(){},mounted:function(){this.getGroup(),this.getData(1),this.getSummary()},components:{yun_service_side:a("2gMQ").a},methods:{getGroup:function(){var e=this;$http.pc_post("plugin/YunChat/groupGetList",{},"loading").then(function(t){t.result?(t.data.unshift({id:0,name:"无客服组"}),e.group_list=t.data):e.$message({message:t.msg,type:"error"})},function(t){e.$message({message:t.msg,type:"error"})})},getSummary:function(){var e=this;$http.pc_post("plugin/YunChat/employeeGetSummary",{},"loading").then(function(t){t.result?e.summary=t.data:e.$message({message:t.msg,type:"error"})},function(t){e.$message({message:t.msg,type:"error"})})},getData:function(e){var t=this,a={page:e,member_kwd:this.search_form.member_kwd,nickname:this.search_form.nickname,group_id:""===this.search_form.group_id?-1:this.search_form.group_id};$http.pc_post("plugin/YunChat/employeeGetList",a,"loading").then(function(e){e.result?(t.list=e.data.data,t.current_page=e.data.current_page,t.total=e.data.total,t.per_page=e.data.per_page):t.$message({message:e.msg,type:"error"})},function(e){t.$message({message:e.msg,type:"error"})})},edit:function(e){this.$router.push(this.fun.getUrl("serviceEmployeeDetail",{},{id:e.id}))},search:function(e){this.getData(e)},addModal:function(){this.$router.push(this.fun.getUrl("serviceEmployeeDetail"))},changeStatus:function(e,t){var a=this;this.$confirm("确定修改员工状态吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.pc_post("plugin/YunChat/employeeChangeStatus",{id:e},"loading").then(function(e){e.result?(a.$message({type:"success",message:"操作成功!"}),a.getData(a.current_page)):a.$message({type:"error",message:e.msg}),a.search(a.current_page)},function(e){a.$message({type:"error",message:e.msg})})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})},deleteData:function(e){var t=this;this.$confirm("确定删除员工吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.pc_post("plugin/YunChat/employeeDelete",{id:e},"loading").then(function(e){e.result?(t.$message({type:"success",message:"操作成功!"}),t.getData(t.current_page)):t.$message({type:"error",message:e.msg}),t.search(t.current_page)},function(e){t.$message({type:"error",message:e.msg})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},removeAgent:function(e){var t=this;this.$confirm("确定释放坐席吗？释放后客服将不能进行会话","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.pc_post("plugin/YunChat/employeeRemoveAgent",{id:e},"loading").then(function(e){e.result?(t.$message({type:"success",message:"操作成功!"}),t.getData(t.current_page),t.getSummary()):t.$message({type:"error",message:e.msg}),t.search(t.current_page)},function(e){t.$message({type:"error",message:e.msg})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},setAgent:function(e){var t=this;this.$confirm("确定分配坐席吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){$http.pc_post("plugin/YunChat/employeeSetAgent",{id:e},"loading").then(function(e){e.result?(t.$message({type:"success",message:"操作成功!"}),t.getData(t.current_page),t.getSummary()):t.$message({type:"error",message:e.msg}),loading.close(),t.search(t.current_page)},function(e){t.$message({type:"error",message:e.msg}),loading.close()})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},copyLink:function(e){this.$refs[e].select(),document.execCommand("Copy"),this.$message.success("复制成功!")}}},s=(a("RuCE"),a("ZrdR")),i=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("yun_service_side",{attrs:{defaultActive:"serviceEmployeeList"}}),e._v(" "),a("div",{attrs:{id:"app"}},[a("div",{staticClass:"vue-crumbs"},[e._v("\n      在线客服 > 客服管理\n    ")]),e._v(" "),a("div",{staticClass:"vue-head"},[a("div",{staticClass:"vue-main-title",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"vue-main-title-left"}),e._v(" "),a("div",{staticClass:"vue-main-title-content"},[e._v("客服管理")]),e._v(" "),a("div",{staticClass:"vue-main-title-button"},[a("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"small"},on:{click:e.addModal}},[e._v("添加客服")])],1)]),e._v(" "),a("div",{staticClass:"vue-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search_form}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"会员昵称/手机号/id"},model:{value:e.search_form.member_kwd,callback:function(t){e.$set(e.search_form,"member_kwd",t)},expression:"search_form.member_kwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"客服昵称"},model:{value:e.search_form.nickname,callback:function(t){e.$set(e.search_form,"nickname",t)},expression:"search_form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择客服组"},model:{value:e.search_form.group_id,callback:function(t){e.$set(e.search_form,"group_id",t)},expression:"search_form.group_id"}},e._l(e.group_list,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.search(1)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",[a("p",[e._v("\n          坐席总数："+e._s(e.summary.total_agent)+"个；已分配坐席数："+e._s(e.summary.used_agent)+"个；未分配坐席数："+e._s(e.summary.total_agent-e.summary.used_agent)+"个；坐席到期时间："+e._s(e.summary.end_time_str)+"\n        ")]),e._v(" "),a("p",[e._v("\n          只有分配坐席的客服，状态才可以修改为正常；没有分配坐席的客服，状态是停用\n        ")])])]),e._v(" "),a("div",{staticClass:"vue-main"},[a("div",{staticClass:"vue-main-form"},[a("div",{staticClass:"vue-main-title",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"vue-main-title-left"}),e._v(" "),a("div",{staticClass:"vue-main-title-content",staticStyle:{flex:"0 0 130px"}},[e._v("\n            客服列表\n          ")]),e._v(" "),a("div",{staticStyle:{"text-align":"left","font-size":"14px",color:"#999"}},[a("span",[e._v("客服数量："+e._s(e.total))]),e._v("   \n          ")]),e._v(" "),a("div",{staticClass:"vue-main-title-button"})]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"会员",align:"center",prop:"username"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("div",[a("img",{staticStyle:{width:"30px",height:"30px",padding:"1px",border:"1px solid #ccc"},attrs:{src:t.row.member_avatar}})]),e._v(" "),a("div",[e._v("\n                  "+e._s(t.row.has_one_member.nickname)+"\n                ")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"昵称",align:"center",prop:"nickname"}}),e._v(" "),a("el-table-column",{attrs:{label:"头像",align:"center",prop:"display_order"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[t.row.avatar?a("div",[a("img",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:t.row.avatar,alt:""}})]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客服组",align:"center",prop:"has_one_group.name"}}),e._v(" "),a("el-table-column",{attrs:{label:"客服页面链接",align:"center",prop:"display_order",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.agent_id?a("div",[a("el-input",{ref:"employeeUrl_"+t.row.id,staticStyle:{width:"65%"},attrs:{readonly:""},model:{value:t.row.h5_page_url,callback:function(a){e.$set(t.row,"h5_page_url",a)},expression:"scope.row.h5_page_url"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.copyLink("employeeUrl_"+t.row.id)}}},[e._v("复制")])],1):a("div",[e._v("\n                未分配坐席\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客服小程序页面链接",align:"center",prop:"display_order",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.agent_id?a("div",[a("el-input",{ref:"employeeMiniUrl_"+t.row.id,staticStyle:{width:"65%"},attrs:{readonly:""},model:{value:t.row.mini_url,callback:function(a){e.$set(t.row,"mini_url",a)},expression:"scope.row.mini_url"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.copyLink("employeeMiniUrl_"+t.row.id)}}},[e._v("复制")])],1):a("div",[e._v("\n                未分配坐席\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"status_desc"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.status?"正常":"停用")+"\n              "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){e.changeStatus(t.row.id,t.$index)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"refund_time",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-option"},[a("el-link",{staticStyle:{"text-align":"center",width:"30px"},attrs:{title:"编辑",underline:!1},on:{click:function(a){e.edit(t.row)}}},[a("a",[e._v("编辑")])]),e._v(" "),t.row.agent_id?a("el-link",{staticStyle:{"text-align":"center",width:"50px"},attrs:{title:"释放坐席",underline:!1},on:{click:function(a){e.removeAgent(t.row.id)}}},[a("a",[e._v("释放坐席")])]):a("el-link",{staticStyle:{"text-align":"center",width:"50px"},attrs:{title:"分配坐席",underline:!1},on:{click:function(a){e.setAgent(t.row.id)}}},[a("a",[e._v("分配坐席")])]),e._v(" "),a("el-link",{staticStyle:{"text-align":"center",width:"30px"},attrs:{title:"删除",underline:!1},on:{click:function(a){e.deleteData(t.row.id)}}},[a("a",[e._v("删除")])])],1)]}}])})],1)],1)]),e._v(" "),e.total>0?a("div",{staticClass:"vue-page"},[a("el-row",[a("el-col",{attrs:{align:"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:e.total,"page-size":e.per_page,"current-page":e.current_page,background:""},on:{"current-change":e.search}})],1)],1)],1):e._e()])],1)},[],!1,null,"5ce5e604",null);i.options.__file="employee_list.vue";t.default=i.exports},RuCE:function(e,t,a){"use strict";var n=a("3fKN");a.n(n).a}}]);