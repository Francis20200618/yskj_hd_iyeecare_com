(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5396"],{bums:function(e,t,a){},damq:function(e,t,a){"use strict";a.r(t);var r=a("14Xm"),s=a.n(r),l=a("QbLZ"),n=a.n(l),i=a("D3Ub"),o=a.n(i),c={data:function(){return{search_form:{uid:"",member_kwd:"",owner_kwd:"",group_name:""},times:"",generateList:[],current_page:1,total:1,per_page:1,new_post_show:!1,new_post_show_url:""}},components:{group_chat_side:a("NUmi").a},mounted:function(){this.getPosterList(1)},methods:{getPosterList:function(e){var t=this;return o()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$http.pc_post("plugin/GroupDevelopUser/posterList",n()({page:e},t.search_form,{start_time:null!==t.times?t.times[0]:"",end_time:null!==t.times?t.times[1]:""}));case 2:1==(r=a.sent).result&&(t.generateList=r.data.data,t.current_page=r.data.current_page,t.total=r.data.total,t.per_page=r.data.per_page);case 4:case"end":return a.stop()}},a,t)}))()},search1:function(e){this.getPosterList(e)},refreshPoster:function(e){var t=this;return o()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$http.pc_post("plugin/GroupDevelopUser/refreshPost",{id:e});case 2:1==(r=a.sent).result?(t.$message.success(r.msg),t.new_post_show=!0,t.new_post_show_url=r.data.image_url):t.$message.error(r.msg);case 4:case"end":return a.stop()}},a,t)}))()},deletePoster:function(e){var t=this;return o()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$http.pc_post("plugin/GroupDevelopUser/deletePost",{id:e});case 2:1==(r=a.sent).result?(t.$message.success(r.msg),location.reload()):t.$message.error(r.msg);case 4:case"end":return a.stop()}},a,t)}))()},deleteAllPost:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$http.pc_post("plugin/GroupDevelopUser/deleteAllPoster",n()({},e.search_form,{start_time:null!==e.times?e.times[0]:"",end_time:null!==e.times?e.times[1]:""}));case 2:1==(a=t.sent).result?(e.$message.success(a.msg),location.reload()):e.$message.error(a.msg);case 4:case"end":return t.stop()}},t,e)}))()}}},u=(a("rjGL"),a("KHd+")),p=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("group_chat_side",{attrs:{defaultActive:"groupChatRecord"}}),e._v(" "),a("div",{staticStyle:{width:"calc(100% - 150px)"},attrs:{id:"app"}},[a("div",{staticClass:"vue-main-title-content base-title"},[e._v("群拓客 > 海报生成记录")]),e._v(" "),a("div",{staticClass:"vue-head"},[e._m(0),e._v(" "),a("div",{staticClass:"vue-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"会员ID"},model:{value:e.search_form.uid,callback:function(t){e.$set(e.search_form,"uid",t)},expression:"search_form.uid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"会员昵称/姓名/手机号"},model:{value:e.search_form.member_kwd,callback:function(t){e.$set(e.search_form,"member_kwd",t)},expression:"search_form.member_kwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"群名称"},model:{value:e.search_form.group_name,callback:function(t){e.$set(e.search_form,"group_name",t)},expression:"search_form.group_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"群主"},model:{value:e.search_form.group_leader,callback:function(t){e.$set(e.search_form,"group_leader",t)},expression:"search_form.group_leader"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-date-picker",{attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.search1(1)}}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"vue-main"},[a("div",{staticClass:"vue-main-title",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"vue-main-title-left"}),e._v(" "),a("div",{staticClass:"vue-main-title-content",staticStyle:{flex:"0 0 130px"}},[e._v("生成列表")]),e._v(" "),a("div",{staticStyle:{flex:"1","text-align":"right"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-plus",size:"mini"},on:{click:e.deleteAllPost}},[e._v("一键删除")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.generateList}},[a("el-table-column",{attrs:{label:"生成时间",align:"center",prop:"created_at"}}),e._v(" "),a("el-table-column",{attrs:{label:"群名",align:"center",prop:"group_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"群主",align:"center",prop:"owner_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"会员ID",align:"center",prop:"uid"}}),e._v(" "),a("el-table-column",{attrs:{label:"会员信息",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:null!==t.row.has_one_member?t.row.has_one_member.avatar_image:"",alt:""}}),e._v(" "),a("span",[e._v(e._s(null!==t.row.has_one_member?t.row.has_one_member.nickname:""))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"海报路径",align:"center",prop:"poster_url"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",type:"primary"}},[a("a",{attrs:{href:t.row.poster_url,download:"poster.png"}},[e._v("下载")])]),e._v(" "),a("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(a){e.refreshPoster(t.row.id)}}},[e._v("重新生成")]),e._v(" "),a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){e.deletePoster(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.total>0?a("div",{staticClass:"vue-page"},[a("el-row",[a("el-col",{attrs:{align:"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:e.total,"page-size":e.per_page,"current-page":e.current_page,background:""},on:{"current-change":e.search1}})],1)],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"海报",visible:e.new_post_show,width:"500"},on:{"update:visible":function(t){e.new_post_show=t}}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"center",staticStyle:{width:"280px",height:"410px",margin:"0 auto"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.new_post_show_url,alt:""}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"}},[a("a",{attrs:{href:e.new_post_show_url,download:"poster.png"}},[e._v("下载海报")])])],1)])],1)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-main-title",staticStyle:{"margin-bottom":"20px"}},[t("div",{staticClass:"vue-main-title-left"}),this._v(" "),t("div",{staticClass:"vue-main-title-content",staticStyle:{flex:"0 0 130px"}},[this._v("生成记录")]),this._v(" "),t("div",{staticClass:"vue-main-title-button"})])}],!1,null,"5d8d5792",null);p.options.__file="group_poster_record.vue";t.default=p.exports},rjGL:function(e,t,a){"use strict";var r=a("bums");a.n(r).a}}]);