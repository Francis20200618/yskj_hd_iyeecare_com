(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3f36"],{"+QaR":function(t,e,a){"use strict";var s=a("oywA");a.n(s).a},"0pyG":function(t,e,a){"use strict";a.r(e);var s=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fans-left"},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("HRVO"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fans-context"},[a("div",[t._v("未添加企业微信成员好友的微信用户访问微信公众号、微信小程序商品详情页时，提示加好友一栏；")]),t._v(" "),a("div",[t._v("用户添加企业微信好友后，可享受设置的好友专享优惠；")]),t._v(" "),a("div",[t._v("如果设置了好友专享价，只要是添加了企业微信成员的用户，不管是新添加还是以往添加的，都可以享受专享价；")]),t._v(" "),a("div",[t._v("如果设置了首次加好友优惠，只有新添加的并且是首次添加的好友才可以获得一次优惠。")]),t._v(" "),a("div",[t._v("让利涨粉优惠在原系统满额减后计算，优先于优惠券！如果同时存在好友专享价和首次加好友优惠，只计算首次加好友优惠！")]),t._v(" "),a("div",{staticClass:"fans-active"},[t._v("该功能仅限平台绑定的企业使用；")]),t._v(" "),a("div",{staticClass:"fans-active"},[t._v("该优惠只对商城自营、供应商、租赁、应用市场、应用市场子平台、多门店项目核销、门店预约、聚合供应商、供应链、电子合同商品订单生效！")])])}],n=a("14Xm"),i=a.n(n),r=a("D3Ub"),c=a.n(r),o=a("m1cH"),l=a.n(o),f=a("YEIV"),_=a.n(f),u=a("QbLZ"),d=a.n(u),p=a("FyfS"),m=a.n(p),v={data:function(){return{titleStatus:0}},props:{side_name:{type:String,default:""}},mounted:function(){},methods:{}},h=(a("FVXj"),a("KHd+")),b=Object(h.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all"},[a("div",{staticClass:"fans"},[a("span",{class:[0==t.titleStatus?"fans_detail":"active_fans_detail"],on:{click:function(e){t.titleStatus=1}}},[t._v(t._s(t.side_name))])])])},[],!1,null,"6bad8ecc",null);b.options.__file="custom_side.vue";var g=b.exports,y={props:{selectMemberVisible:{type:Boolean,default:!1},selectCouponType:{type:String,default:""}},components:{},data:function(){return{search:{staff_info:""},staffList:[],oneShow:!1,current_page:1,total:1,per_page:1}},mounted:function(){this.getStaffList(1)},methods:{select:function(t){this.$emit("memberList",{state:!1,data:t})},getStaffList:function(t){var e=this;return c()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$http.pc_post("plugin/DiscountHarvestFans/getStaffList",{search:d()({},e.search),page:t});case 2:(s=a.sent).result?(e.staffList=s.data.data,e.current_page=s.data.current_page,e.total=s.data.total,e.per_page=s.data.per_page):e.$message.error(s.msg);case 4:case"end":return a.stop()}},a,e)}))()},search1:function(t){this.getStaffList(t)}}},x=(a("+QaR"),Object(h.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group_coupon_dialog"},[a("el-dialog",{attrs:{center:"",title:"选择成员",visible:t.selectMemberVisible,"before-close":t.select,width:"50%"},on:{"update:visible":function(e){t.selectMemberVisible=e}}},[a("div",{staticStyle:{display:"flex",width:"95%"}},[a("el-input",{attrs:{placeholder:"企业微信员工姓名/手机号"},model:{value:t.search.staff_info,callback:function(e){t.$set(t.search,"staff_info",e)},expression:"search.staff_info"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){t.search1(1)}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%",height:"500px","overflow-y":"auto"},attrs:{data:t.staffList}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"成员名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号码"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:""},on:{click:function(a){t.select(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("div",{staticClass:"vue-page"},[a("el-row",[a("el-col",{attrs:{align:"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:t.total,"page-size":t.per_page,"current-page":t.current_page,background:""},on:{"current-change":t.search1}})],1)],1)],1)],1)],1)},[],!1,null,"2f04a160",null));x.options.__file="select_member_dialog.vue";var w=x.exports,k={data:function(){return{checked_vip:[1],form:{is_open:0,numerical_type:{order_amount:"",discount_amount:""},percentage_type:{order_amount:"",discount_amount:""}}}},props:{tab_name:{type:String,default:""},staff:{type:Object,default:function(){}}},mounted:function(){this.staff.hasOwnProperty("numerical_type")&&(this.form.is_open=this.staff.is_open,this.form.numerical_type=this.staff.numerical_type,this.checked_vip=[1]),this.staff.hasOwnProperty("percentage_type")&&(this.form.is_open=this.staff.is_open,this.form.percentage_type=this.staff.percentage_type,this.checked_vip=[2])},methods:{changeCheckBox:function(t){this.checked_vip=[2==t.length?t[1]:1==t.length?t[0]:""]}}},S=(a("Hf3j"),Object(h.a)(k,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form-item",{attrs:{label:t.tab_name,"label-width":t.tab_name+" == '好友专享价' ? 82px : 110px"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.is_open,callback:function(e){t.$set(t.form,"is_open",e)},expression:"form.is_open"}})],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("div",{staticClass:"discount-box"},[a("el-checkbox-group",{on:{change:t.changeCheckBox},model:{value:t.checked_vip,callback:function(e){t.checked_vip=e},expression:"checked_vip"}},[a("el-checkbox",{attrs:{label:1}},[t._v("下单满")])],1),t._v(" "),a("div",[a("el-input",{staticClass:"discount-card",staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"},model:{value:t.form.numerical_type.order_amount,callback:function(e){t.$set(t.form.numerical_type,"order_amount",e)},expression:"form.numerical_type.order_amount"}}),t._v(" "),a("span",[t._v("元")])],1),t._v(" "),a("div",[a("span",{staticClass:"discount-card"},[t._v("立减")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"},model:{value:t.form.numerical_type.discount_amount,callback:function(e){t.$set(t.form.numerical_type,"discount_amount",e)},expression:"form.numerical_type.discount_amount"}}),t._v(" "),a("span",{staticClass:"discount-card"},[t._v("元")])],1)],1),t._v(" "),a("div",{staticClass:"discount-box"},[a("el-checkbox-group",{on:{change:t.changeCheckBox},model:{value:t.checked_vip,callback:function(e){t.checked_vip=e},expression:"checked_vip"}},[a("el-checkbox",{attrs:{label:2}},[t._v("下单满")])],1),t._v(" "),a("div",[a("el-input",{staticClass:"discount-card",staticStyle:{width:"200px"},attrs:{placeholder:"请输入金额"},model:{value:t.form.percentage_type.order_amount,callback:function(e){t.$set(t.form.percentage_type,"order_amount",e)},expression:"form.percentage_type.order_amount"}}),t._v(" "),a("span",[t._v("元")])],1),t._v(" "),a("div",[a("span",{staticClass:"discount-card"},[t._v("优惠")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入数值"},model:{value:t.form.percentage_type.discount_amount,callback:function(e){t.$set(t.form.percentage_type,"discount_amount",e)},expression:"form.percentage_type.discount_amount"}}),t._v(" "),a("span",{staticClass:"discount-card"},[t._v("%")])],1)],1)])],1)},[],!1,null,"6dc33fca",null));S.options.__file="preferential_setting_card.vue";var $={data:function(){return{form:{link_open:"",is_open:0},tab_name:"好友专享价",staff_set:[],tagList:[],selectMemberVisible:!1,select_member_index:"",first_staff:{},has_staff:{},isShow:!1}},components:{custom_side:g,select_member_dialog:w,preferential_setting_card:S.exports},mounted:function(){this.getTagList(),this.getSet()},methods:{addMember:function(){this.staff_set.push({tag_id:"",staff_name:"",staff_id:""})},delMember:function(t){this.staff_set.splice(t,1)},selectMember:function(t){this.selectMemberVisible=!0,this.select_member_index=t},selectMemberList:function(t){this.selectMemberVisible=t.state,t.data.hasOwnProperty("id")&&(this.staff_set[this.select_member_index].staff_name=t.data.name,this.staff_set[this.select_member_index].staff_id=t.data.id)},submit:function(){var t,e,a=-1!==this.$refs.has_staff.checked_vip.indexOf(1)?"numerical_type":"percentage_type",s=-1!==this.$refs.first_staff.checked_vip.indexOf(1)?"numerical_type":"percentage_type",n=new Object,i=new Array;for(var r in this.staff_set)i.push(this.staff_set[r].tag_id);var c=this.tagList.filter(function(t){return i.indexOf(t.tag_id)>-1});if(c.length>0){var o=!0,f=!1,u=void 0;try{for(var p,v=m()(c);!(o=(p=v.next()).done);o=!0){var h=p.value,b=!0,g=!1,y=void 0;try{for(var x,w=m()(this.staff_set);!(b=(x=w.next()).done);b=!0){var k=x.value;k.tag_id==h.tag_id&&(k.tag_id=h.tag_id,k.tag_name=h.name),""==k.tag_id&&(k.tag_id="",k.tag_name="")}}catch(t){g=!0,y=t}finally{try{!b&&w.return&&w.return()}finally{if(g)throw y}}}}catch(t){f=!0,u=t}finally{try{!o&&v.return&&v.return()}finally{if(f)throw u}}}else{var S=!0,$=!1,C=void 0;try{for(var M,L=m()(this.staff_set);!(S=(M=L.next()).done);S=!0){var O=M.value;O.tag_id="",O.tag_name=""}}catch(t){$=!0,C=t}finally{try{!S&&L.return&&L.return()}finally{if($)throw C}}}n=d()({},this.form,{discount_set:{has_staff:(t={},_()(t,""+a,this.$refs.has_staff.form[a]),_()(t,"is_open",this.$refs.has_staff.form.is_open),t),first_staff:(e={},_()(e,""+s,this.$refs.first_staff.form[s]),_()(e,"is_open",this.$refs.first_staff.form.is_open),e)},staff_set:[].concat(l()(this.staff_set))}),this.saveSet(n)},saveSet:function(t){var e=this;return c()(i.a.mark(function a(){var s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$http.pc_post("plugin/DiscountHarvestFans/saveSet",{form:t});case 2:(s=a.sent).result?(e.$message.success(s.msg),location.reload()):e.$message.error(s.msg);case 4:case"end":return a.stop()}},a,e)}))()},getSet:function(){var t=this;return c()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isShow=!1,e.next=3,$http.pc_post("plugin/DiscountHarvestFans/getSet",{});case 3:(a=e.sent).result?(t.form.is_open=a.data.is_open,t.form.link_open=a.data.link_open,t.staff_set=a.data.staff_set,t.first_staff=a.data.discount_set.first_staff,t.has_staff=a.data.discount_set.has_staff,t.isShow=!0):(t.$message.error(a.msg),t.isShow=!0);case 5:case"end":return e.stop()}},e,t)}))()},getTagList:function(){var t=this;return c()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$http.pc_post("plugin/DiscountHarvestFans/getTagList",{});case 2:(a=e.sent).result?t.tagList=a.data:t.$message.error(a.msg);case 4:case"end":return e.stop()}},e,t)}))()}}},C=(a("nnfl"),Object(h.a)($,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all"},[a("custom_side",{attrs:{side_name:"让利涨粉"}}),t._v(" "),a("div",{staticStyle:{"margin-top":"10px",width:"calc(100% - 150px)"},attrs:{id:"app"}},[a("div",{staticClass:"title_tag"},[t._v("让利涨粉 > 基础设置")]),t._v(" "),a("div",{staticClass:"vue-main"},[t._m(0),t._v(" "),a("div",{staticClass:"fans-right"},[a("div",{staticClass:"fans-title"},[t._v("功能介绍")]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"fans-title function-setting"},[t._v("功能设置")]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"让利涨粉"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.form.is_open,callback:function(e){t.$set(t.form,"is_open",e)},expression:"form.is_open"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优惠设置"}},[a("el-radio-group",{staticStyle:{"margin-bottom":"30px"},model:{value:t.tab_name,callback:function(e){t.tab_name=e},expression:"tab_name"}},[a("el-radio-button",{attrs:{label:"好友专享价"}},[t._v("好友专享价")]),t._v(" "),a("el-radio-button",{attrs:{label:"首次加好友优惠"}},[t._v("首次加好友优惠")])],1),t._v(" "),t.isShow?a("div",[a("preferential_setting_card",{directives:[{name:"show",rawName:"v-show",value:"好友专享价"==t.tab_name,expression:"tab_name == '好友专享价' "}],ref:"has_staff",attrs:{staff:t.has_staff,tab_name:t.tab_name}})],1):t._e(),t._v(" "),t.isShow?a("div",[a("preferential_setting_card",{directives:[{name:"show",rawName:"v-show",value:"首次加好友优惠"==t.tab_name,expression:"tab_name == '首次加好友优惠' "}],ref:"first_staff",attrs:{staff:t.first_staff,tab_name:t.tab_name}})],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"添加成员"}},[a("div",{staticClass:"tip"},[t._v("如果选择多个成员,存在会员直推上级的,优先使用上级二维码;如果没有的随机一个成员.")]),t._v(" "),a("el-table",{staticStyle:{width:"60%"},attrs:{data:t.staff_set}},[a("el-table-column",{attrs:{label:"选择成员",prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{width:"55px","text-align":"center"}},[""==e.row.staff_name?a("i",{staticClass:"el-icon-plus",on:{click:function(a){t.selectMember(e.$index)}}}):t._e(),t._v(" "),a("span",{staticStyle:{cursor:"default"},on:{click:function(a){t.selectMember(e.$index)}}},[t._v(t._s(e.row.staff_name))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"选择标签",align:"center",prop:"created_at",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"请选择标签",clearable:"",filterable:""},model:{value:e.row.tag_id,callback:function(a){t.$set(e.row,"tag_id",a)},expression:"scope.row.tag_id"}},t._l(t.tagList,function(t){return a("el-option",{key:t.tag_id,attrs:{label:t.name,value:t.tag_id}})}))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.delMember(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.addMember}},[t._v("新增")])],1),t._v(" "),a("el-form-item",{attrs:{label:"商品链接"}},[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.form.link_open,callback:function(e){t.$set(t.form,"link_open",e)},expression:"form.link_open"}},[t._v("自动发送")]),t._v(" "),a("div",{staticClass:"tip"},[t._v("勾选后,用户添加好友后,自动发送添加好友时访问的商品链接,不再发送欢迎语!")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"send-buttons"},[a("el-button",{staticStyle:{background:"#5ab79c","border-color":"#5ab79c"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)]),t._v(" "),a("select_member_dialog",{attrs:{selectMemberVisible:t.selectMemberVisible},on:{memberList:t.selectMemberList}})],1)},s,!1,null,"4fff80d2",null));C.options.__file="index.vue";e.default=C.exports},FVXj:function(t,e,a){"use strict";var s=a("pMBf");a.n(s).a},HRVO:function(t,e,a){t.exports=a.p+"static/img/discount_harvest_fans.81beac1.png"},Hf3j:function(t,e,a){"use strict";var s=a("btsd");a.n(s).a},"RU/L":function(t,e,a){a("Rqdy");var s=a("WEpk").Object;t.exports=function(t,e,a){return s.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var s=a("Y7ZC");s(s.S+s.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var s=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,s.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},btsd:function(t,e,a){},nnfl:function(t,e,a){"use strict";var s=a("tFMf");a.n(s).a},oywA:function(t,e,a){},pMBf:function(t,e,a){},tFMf:function(t,e,a){}}]);