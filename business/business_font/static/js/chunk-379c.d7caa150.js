(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-379c"],{"+MII":function(t,e,i){},Duwe:function(t,e,i){"use strict";var s=i("edgx");i.n(s).a},Gz31:function(t,e,i){},HVHc:function(t,e,i){},MjXf:function(t,e,i){i("ieHM"),t.exports=i("WEpk").clearImmediate},TotV:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFIGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMDJUMDk6MzQ6MTcrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTAyVDE0OjE1OjQ1KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTAyVDE0OjE1OjQ1KzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJhMTJjMmY0LWJjZGUtNGJkZi04Y2NlLTUxZjgwY2EyZjQzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpiYTEyYzJmNC1iY2RlLTRiZGYtOGNjZS01MWY4MGNhMmY0MzEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiYTEyYzJmNC1iY2RlLTRiZGYtOGNjZS01MWY4MGNhMmY0MzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJhMTJjMmY0LWJjZGUtNGJkZi04Y2NlLTUxZjgwY2EyZjQzMSIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0wMlQwOTozNDoxNyswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++mdLaQAAA8ZJREFUeJztmt9rFFcUxz9nJlu3lkIfGlPSgi/imwoVI4hIn1LoTwilPsQ2MSgUfNI/o88+iZjgD6qkLUtJfbAv1YfStA39I1KspRQJpsm6ztzTh7njpjG7O3d3Zu/o7hcG9u7eO3P2M/ecc3+JqjLICnwb4FtDAL4N8K0hAN8G+NYQgG8DfGsIwLcBvjXwAEZcKtdqNUSEIAjY2NggDMOObYIgwGG4fdwYcxH4BTgP/Nvp3qlEBICpqamszwIcAXQjYwzGmKzVJ0XkEHAI2A3MAHFRtkGfXCAIAkQky/U98KdtNg1cpuCX1LcYkHbRDloGPgYe2PIscAno7Gtdqq9BcPsbb6FfgfeAv235NHCFgnqC1yzQBsLvwIc0IXwOLFAABO9psE1vWAY+Ae7b8jQJhFzdwTuAVC1A3CP543/Y8jQwT44QSgMg1Q4gfgRO0uwJn5FjdigdgFTbguVPwEfAX/bnWZLskCm1tFNpAWyVBbECfAD8Y78+raqX6RGCM4AOKaxQichvwPvAKoCqzqnqPD1AcPYjVRVjzGFgP9Do9sFdSIBIRB4ZY5ZE5AtAVHUGUBGZA5zX+J0ARFE0CYyp6lXHSU6uEhHDlreuqrOquioiPwO3Xe7lBCAMw1BVR+K40PlJFj3jusaYl0kmUE5yAlCtVn9Q1cr6+npdRPbSXxdopZdUdU1EFoE118ZOAFQ1UtUI+Mr1QWXVc5EGi9TAA3ByAV/5v0g5AWg0yhDz8pUTgHq9DrxYPcEJQLoK+yIdqhj4IDjwAFwnQ6G9JoDXgSh3i9xVAR6SLKE9BjJvQoD7SPBdYA/JslRpZIPyBWCFZBkts1yD4CvAq2UMgkEQjAKvubZznQ0uqmoYx/EEcGrLT9+KyB2gSv/3GnZtbm7er1QqtTAM2+4l7iRXF0BVY5I1OWhCOKiqXwLLPsYI6f7j1s3SrOr2baUQbtjyPuAbYMKHe2TYbWqpXrprCuGaLb8JLAFv257Sw637p179NSLZu1uw5VGSJanD8NRlenxEscojYMXAWZoQxoDvgGNphRREGWHkFbEj4AxNdxgHbgHvbK9YNhB5pqyYxB3SwPiW/Xxip8plAZF3zo5JjrXctOVx4GvgaKsGviEUMWhJs0MKYRSoAQdaNfDZG4oatT0m6QnXbfkNkuxwpF0jH8GyyGFrA5jj/zHhHAWe9+lGRR+TewKcFZGGqn4K3CXjsTdV7cvSWz8mLg2Sww0PSObtpZL4jsK+NfBLYkMAvg3wrSEA3wb41hCAbwN8awjAtwG+NfAA/gNRYiSBaCoPNgAAAABJRU5ErkJggg=="},XFAx:function(t,e,i){"use strict";var s=i("eOtT");i.n(s).a},ZAV5:function(t,e,i){"use strict";var s=i("+MII");i.n(s).a},Zq6U:function(t,e,i){},bylg:function(t,e,i){"use strict";i.r(e);var s=i("gDS+"),n=i.n(s),a=i("ndnO"),o=i.n(a),c=i("QbLZ"),r=i.n(c),l=i("vDqi"),d=i.n(l),u=i("L2JU"),h=i("XJYT"),m={props:["item"],methods:{checkoutURL:function(t){return t=t.replace(/(?<!src="|src=')(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-|#)+)/g,function(t){return"<span onclick='event.stopPropagation ? event.stopPropagation() : (event.cancelBubble = true); // 阻止事件冒泡'><a class='article-link-color' href='"+t+"' target='_blank'>"+t+"</a></span>"})}}},p=(i("XFAx"),i("KHd+")),g=Object(p.a)(m,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"txt-content",attrs:{id:"a_content"},domProps:{innerHTML:this._s(this.checkoutURL(this.item.content))}})},[],!1,null,null,null);g.options.__file="ChatContentTxt.vue";var v=g.exports,f={props:["item"]},_=(i("xnLY"),Object(p.a)(f,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pic-txt"},[e("div",{staticStyle:{"text-align":"center"},on:{click:function(t){t.stopPropagation()}}},[e("el-image",{staticStyle:{width:"280px",height:"280px"},attrs:{src:this.item.content,"preview-src-list":[this.item.content]}})],1)])},[],!1,null,"1e8adf44",null));_.options.__file="ChatContentPic.vue";var A=_.exports,b={props:["item"],mounted:function(){},methods:{toGoods:function(t){window.open(this.fun.getSiteRoot()+"/addons/yun_shop/?menu#/goods/"+t.id+"?i="+this.fun.getKeyByI())}}},y=(i("dP1y"),Object(p.a)(b,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods-con",on:{click:function(e){e.stopPropagation(),t.toGoods(t.item.content)}}},[i("div",{staticClass:"goods-img"},[i("img",{attrs:{src:t.item.content.thumb}})]),t._v(" "),i("div",{staticClass:"goods-txt"},[i("div",{staticClass:"goods-title"},[t._v(t._s(t.item.content.title))]),t._v(" "),i("div",{staticClass:"goods-price"},[t._v("￥"+t._s(t.item.content.price))])])])},[],!1,null,"2065a40a",null));y.options.__file="ChatContentGoods.vue";var C=y.exports,w={props:["item"]},k=(i("Duwe"),Object(p.a)(w,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-con"},[i("div",{staticClass:"order-header"},[i("span",{staticClass:"order-no"},[t._v("订单号："+t._s(t.item.content.order_sn))]),t._v(" "),i("span",{staticClass:"order-status"},[t._v(t._s(t.item.content.status_name))])]),t._v(" "),t._l(t.item.content.has_many_order_goods,function(e){return i("div",{key:e.goods_id,staticClass:"order-item-con"},[i("div",{staticClass:"order-goods-img"},[i("img",{attrs:{src:e.thumb}})]),t._v(" "),i("div",{staticClass:"order-item-txt"},[i("div",{staticClass:"order-goods-title"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"order-goods-price"},[i("span",{staticClass:"order-goods-num"},[t._v("x"+t._s(e.total))]),t._v("￥"+t._s(e.price))])])])}),t._v(" "),i("div",{staticClass:"order-footer"},[t._v("\n      共 "+t._s(t.item.content.goods_total)+" 件商品 实付：¥"+t._s(t.item.content.price)+"\n  ")])],2)},[],!1,null,"d4b723be",null));k.options.__file="ChatContentOrder.vue";var I=k.exports,R={props:["item"]},S=(i("rboA"),Object(p.a)(R,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"send-msg-fail"},[e("i",{staticClass:"el-icon-info",staticStyle:{color:"#fb4a4a"}}),this._v("\n  发送失败,请稍后重试。\n")])}],!1,null,"6eeea3ba",null));S.options.__file="ChatContentFailed.vue";var L=S.exports,x={_step:0,_title:document.title,_timer:null},E={components:{ChatContentTxt:v,ChatContentPic:A,ChatContentGoods:C,ChatContentOrder:I,ChatContentFailed:L},data:function(){return{websock:null,heartBeatInterval:null,msg_id_list:[],ockReconnect:!1,timeout:3e3,timeoutObj:null,serverTimeoutObj:null,timeoutnum:null,isClosed:!1,lockReconnect:!1,maxReconnectNum:11,currentReconnectNum:0,progressFlag1:!1,progressPercent1:0,maxSize:104693760,chatList:[],userList:[],userUid:0,queue_id:0,employeeInfo:{},memberInfo:{},socketBindUid:"",groupId:0,page:1,total_page:0,isLoadMore:!0,msgText:"",activeTab:"tab_member",personalReplySearch:{kwd:""},commonReplySearch:{kwd:""},goodsSearch:{kwd:""},orderSearch:{order_sn:""},transferSearch:{kwd:""},personalReplyList:[],commonReplyList:[],orderList:[],showEmoji:!1,emojiList:[],emojisTmp:[],emojiObjs:{},goodsDialogVisible:!1,goodsList:[],transferDialogVisible:!1,transferEmployeeList:[],showCloseChat:!1,chatShowMoreOpt:{},showCloseId:"",loadingInstance:null,chat_opt_setting:{},loginTimer:null,notice_audio_url:""}},created:function(){window.Notification?"granted"==Notification.permission?console.log("允许通知"):(console.log("需要通知权限"),Notification.requestPermission(function(t){})):console.error("浏览器不支持Notification"),this.isClosed=!1,this.$store.dispatch("GetUserInfo"),this.$route.query.user_id&&(this.userUid=parseInt(this.$route.query.user_id)),this.initChat()},computed:r()({},Object(u.b)(["globalData"])),mounted:function(){this.checkLogin()},destroyed:function(){console.log("destroyed timeoutObj"),this.lockReconnect=!0,clearTimeout(this.timeoutObj),console.log("destroyed serverTimeoutObj"),clearTimeout(this.serverTimeoutObj),this.loginTimer&&(this.loginTimer=null,clearTimeout(this.loginTimer)),this.isClosed=!0,this.websock&&this.websock.close(),this.clear(),this.clearHeartBeat()},methods:{audioPlay:function(){var t=this;this.notice_audio_url&&this.$refs.audio&&(this.$refs.audio.load(),setTimeout(function(){t.$refs.audio.play()},200)),this.showTitleTip()},showTitleTip:function(){var t=this,e=x._title.replace("有新的消息！！","").replace("您有新的消息，请及时查看","");return x._timer&&this.clear(),x._timer=setTimeout(function(){t.showTitleTip(),x._step++,3==x._step&&(x._step=1),1==x._step&&(document.title="有新的消息！！"+e),2==x._step&&(document.title="您有新的消息，请及时查看"+e)},800),[x._timer,x._title]},clear:function(){o()(x._timer),clearTimeout(x._timer),x._timer=null,document.title="当前会话"},popNotice:function(t,e,i,s){if(2!=s&&3!=s||!e||(2==s&&(e="商品："+JSON.parse(decodeURIComponent(e)).title),3==s&&(e="订单："+JSON.parse(decodeURIComponent(e)).order_sn)),"granted"==Notification.permission){var a=new Notification("来自："+t,{body:e,tag:n()({user_id:i,content:e}),icon:this.globalData.plat_setting.pc_logo_url||"https://www.yunzmall.com/min_img/image.png"}),o=this;a.onclick=function(t){o.$nextTick(function(){setTimeout(function(){var e=JSON.parse(t.currentTarget.tag)||{};o.userList.map(function(t){t.uid==e.user_id&&o.changeChat(t)})},500)}),window.focus(),a.close()}}},pasting:function(t){var e=t.clipboardData&&t.clipboardData.items,i=null;if(e&&e.length)for(var s=0;s<e.length;s++)if(e[s].type.indexOf("image")>-1){i=e[s].getAsFile(),this.onRead(i,!0);break}},onRead:function(t,e){var i=this;this.loadingInstance=h.Loading.service({lock:!0,text:"发送中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});var s=new FormData;!0===e?s.append("file",t):s.append("file",t.file);var n=this.fun.getRealUrl("upload.uploadPic",{});d.a.post(n,s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var e=t.data;1===e.result?(i.msgText=e.data.img_url,i.sendMsg(1)):i.$message.error(e.msg),i.loadingInstance.close()}).catch(function(t){console.log(t)})},handleKeyDown:function(t){t.metaKey&&13===t.keyCode||t.altKey&&13===t.keyCode||t.ctrlKey&&13===t.keyCode?this.msgText+="\n":this.sendMsg(0),t.stopPropagation(),t.preventDefault()},chatMouseenter:function(t){this.showCloseChat=!0,this.showCloseId=t.uid},chatMouseleave:function(){this.showCloseChat=!1},checkLogin:function(){$http.get("plugin.yun-chat.frontend.login.check-login"),this.loginTimer&&(this.loginTimer=null,clearTimeout(this.loginTimer)),this.loginTimer=setTimeout(function(){$http.get("plugin.yun-chat.frontend.login.check-login")},9e5)},initChat:function(t){var e=this;$http.get("plugin.yun-chat.frontend.chat.index",{group_id:this.groupId,user_uid:this.userUid},"加载中").then(function(i){if(1===i.result){if(e.emojiList.length<=0){e.emojiList=i.data.emoji_list||[];for(var s={},n=0;n<e.emojiList.length;n++)s[e.emojiList[n].name]=e.emojiList[n];e.emojiObjs=s}if(e.initWebSocket(),e.userList=i.data.queue_list,e.employeeInfo=i.data.employee_info,!e.queue_id&&e.userList.length>0){var a=i.data.queue_list.filter(function(t){return t.uid==e.userUid})[0];a&&a.id?e.queue_id=a.id:e.queue_id=e.userList[0].id}if("transfer"===t&&e.userList.length<=0)return void e.$router.push(e.fun.getUrl("chatHomeIndex"));i.data.member_info&&e.userList.length>0&&(e.memberInfo=i.data.member_info,e.userUid=i.data.member_info.uid,e.getChatList())}else e.$message.error(i.msg)}).catch(function(t){console.log(t)})},getUserList:function(){var t=this;$http.get("plugin.yun-chat.frontend.chat.index",{group_id:this.groupId,user_uid:this.userUid}).then(function(e){1===e.result?t.userList=e.data.queue_list:t.$message.error(e.msg)}).catch(function(t){console.log(t)})},getOrderList:function(){var t=this;$http.get("plugin.yun-chat.frontend.order-list.get-data",{user_uid:this.userUid,order_sn:this.orderSearch.order_sn},"loading").then(function(e){1===e.result?t.orderList=e.data:t.$message.error(e.msg)}).catch(function(t){console.log(t)})},getPersonalReplyList:function(){var t=this;$http.get("plugin.yun-chat.frontend.common-reply.query-personal",this.personalReplySearch,"loading").then(function(e){1===e.result?t.personalReplyList=e.data:t.$message.error(e.msg),t.personalReplySearch={kwd:""}}).catch(function(t){console.log(t)})},getCommonReplyList:function(){var t=this;$http.get("plugin.yun-chat.frontend.common-reply.query-common",this.commonReplySearch,"加载中").then(function(e){1===e.result?t.commonReplyList=e.data:t.$message.error(e.msg),t.commonReplySearch={kwd:""}}).catch(function(t){console.log(t)})},selectReply:function(t){this.msgText=t.content},getGoodsList:function(){var t=this;this.goodsSearch.kwd?$http.get("plugin.yun-chat.frontend.goods.queryList",this.goodsSearch,"loading").then(function(e){1===e.result?t.goodsList=e.data:t.$message.error(e.msg),t.goodsSearch={keyword:""}}).catch(function(t){console.log(t)}):this.$message.error("请输入商品名称")},selectGoods:function(t){var e=this;this.$confirm("确定把商品（"+t.title+"）发送个用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var i={};i.id=t.id,i.title=t.title,i.thumb=t.thumb,i.price=t.price,e.msgText=encodeURIComponent(n()(i)),console.log(e.msgText),e.sendMsg(2),e.goodsDialogVisible=!1}).catch(function(){})},selectOrder:function(t){this.msgText=encodeURIComponent(n()(t)),console.log(this.msgText),this.sendMsg(3)},showGoodsDialog:function(){this.goodsDialogVisible=!0},showTransferDialog:function(){this.transferDialogVisible=!0},selectTransfer:function(t){var e=this;this.$confirm("确定转接给（"+t.nickname+"）对接？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){$http.get("plugin.yun-chat.frontend.chat.transfer",{employee_id:t.id,user_uid:e.userUid}).then(function(t){1===t.result?(e.$message.success(t.msg),e.userUid=0,e.queue_id=0,e.initChat("transfer")):e.$message.error(t.msg),e.transferSearch={keyword:""}}).catch(function(t){console.log(t)}),e.transferDialogVisible=!1}).catch(function(){})},getTransferEmployeeList:function(){var t=this;$http.get("plugin.yun-chat.frontend.employee.queryList",this.transferSearch).then(function(e){1===e.result?t.transferEmployeeList=e.data:t.$message.error(e.msg),t.transferSearch={keyword:""}}).catch(function(t){console.log(t)})},getChatList:function(){var t=this;this.page=1,$http.get("plugin.yun-chat.frontend.chat.chats",{page:1,queue_id:this.queue_id},"加载中").then(function(e){1===e.result?(t.isLoadMore=!0,t.total_page=e.data.last_page,t.total_page||(t.total_page=0),t.getUserList(),t.chatList=t.fmtChatList(e.data.data),t.$nextTick(function(){document.getElementById("chat-data")&&(document.getElementById("chat-data").scrollTop=1e4)})):t.$message.error(e.msg)}).catch(function(t){console.log(t)})},showMore:function(){var t=this,e=document.getElementById("chat-data").offsetHeight;this.isLoadMore=!1,this.page>=this.total_page||(this.page=this.page+1,$http.get("plugin.yun-chat.frontend.chat.chats",{page:this.page,queue_id:this.queue_id},"加载中").then(function(i){if(t.isLoadMore=!0,1===i.result){var s=t.fmtChatList(i.data.data);t.chatList=s.concat(t.chatList),t.getUserList(),t.$nextTick(function(){document.getElementById("chat-data")&&(document.getElementById("chat-data").scrollTop=e+50)})}else t.page=t.page-1,t.isLoadMore=!1}))},selectEmoji:function(t){this.showEmoji=!1;var e=document.querySelector("#text_in"),i=t.text;if(e.selectionStart||0===e.selectionStart){var s=e.selectionStart,n=e.selectionEnd;this.msgText=e.value.substring(0,s)+i+e.value.substring(n,e.value.length),e.focus(),e.setSelectionRange(n+i.length,n+i.length)}else this.msgText=i;this.emojisTmp.push(t)},beforeUpload1:function(t){if(t.size>=this.maxSize)return this.$message.error("文件大小超出10M"),!1;this.progressFlag1=!0},onProgress1:function(t,e,i){this.progressPercent1=Number(t.percent.toFixed(2))},onSuccess:function(t,e,i){100===this.progressPercent1&&(this.progressFlag1=!1,this.progressPercent1=0),this.msgText=t.data.img_url,this.sendMsg(1)},onError:function(){this.progressFlag1=!1,this.progressPercent1=0,this.$message.error("上传失败请重新上传")},closeChat:function(t){var e=this;$http.get("plugin.yun-chat.frontend.chat.closeChat",{queue_id:t.id},"加载中").then(function(t){1===t.result?(e.userUid=0,e.queue_id=0,e.initChat()):e.$message.error(t.msg)}).catch(function(t){console.log(t)})},sendMsg:function(t){var e=this;if(this.msgText){for(var i=this.msgText,s=0;s<this.emojisTmp.length;s++)i=i.replace(this.emojisTmp[s].text,this.emojisTmp[s].name);var n=this.generateChatData(i,0,this.getNowDateTime(),t);$http.post("plugin.yun-chat.frontend.chat.sendMsg",{text:i,queue_id:this.queue_id,content_type:t}).then(function(t){1===t.result?(e.fmtChatList(t.data),e.chatList.push(t.data),e.$nextTick(function(){document.getElementById("chat-data")&&(document.getElementById("chat-data").scrollTop=1e4)})):(e.chatList.push(r()({},n,{send_fail:1})),e.$message.error(t.msg))}).catch(function(t){e.chatList.push(r()({},n,{send_fail:1})),console.log(t)}),this.msgText=""}},backMsg:function(t){var e=this;$http.get("plugin.yun-chat.frontend.chat.backedMsg",{id:t.id},"加载中").then(function(i){if(1===i.result){for(var s=[],n=0;n<e.chatList.length;n++)e.chatList[n].id==t.id&&(e.chatList[n].is_backed=1),s.push(e.chatList[n]);e.chatList=s}else e.$message.error(i.msg)}).catch(function(t){console.log(t)})},changeChat:function(t){this.activeTab="tab_member",this.queue_id=t.id,this.userUid=t.uid,this.orderList=[],this.initChat()},changeTab:function(t,e){"tab_order"===this.activeTab?this.orderList.length<=0&&this.getOrderList():"tab_person_reply"===this.activeTab?this.personalReplyList.length<=0&&this.getPersonalReplyList():"tab_common_reply"===this.activeTab&&this.commonReplyList.length<=0&&this.getCommonReplyList()},changeReadMessage:function(t){$http.get("plugin.yun-chat.frontend.chat.is-read",{chats_id:t}).then(function(t){}).catch(function(t){console.log(t)})},clearHeartBeat:function(){clearInterval(this.heartBeatInterval),this.heartBeatInterval=null},keepHeartBeat:function(){var t=this;this.heartBeatInterval=setInterval(function(){t.websock.send(n()({type:"ping"}))},6e4)},reconnect:function(){var t=this;this.lockReconnect||this.isClosed||this.currentReconnectNum>=this.maxReconnectNum?this.websock&&this.websock.close():(this.lockReconnect=!0,this.timeoutnum&&clearTimeout(this.timeoutnum),this.timeoutnum=setTimeout(function(){t.initWebSocket(),t.lockReconnect=!1},5e3))},heartBeatStart:function(){var t=this;this.timeoutObj&&clearTimeout(this.timeoutObj),this.serverTimeoutObj&&clearTimeout(this.serverTimeoutObj),this.timeoutObj=setTimeout(function(){console.log("this.websock.readyState"+t.websock.readyState),1==t.websock.readyState?(t.websock.send(n()({type:"ping"})),t.keepHeartBeat(),t.currentReconnectNum=0):t.reconnect()},this.timeout)},initWebSocket:function(){var t=this;this.msg_id_list=[],this.clearHeartBeat(),console.log(this.currentReconnectNum,"currentReconnectNum",this.maxReconnectNum),this.currentReconnectNum+=1,$http.get("plugin.yun-chat.frontend.chat.get-ws-setting",{channel_type:55}).then(function(e){if(1===e.result){t.chat_opt_setting=e.data.chat_opt_setting||{},t.notice_audio_url=e.data.notice_audio_url;var i=e.data.wss_params,s=i.host+"?appId="+i.appId+"&signature="+i.signature+"&nonceStr="+i.nonceStr+"&timestamp="+i.timestamp+"&clientid="+i.clientid+"&agent_id="+i.agent_id;t.websock=new WebSocket(s),t.websock.onopen=t.websocketonopen,t.websock.onmessage=t.websocketonmessage,t.websock.onerror=t.websocketonerror,t.websock.onclose=t.websocketclose,console.log("连接建立")}else t.$message.error(e.msg)}).catch(function(t){console.log(t)})},websocketonopen:function(){this.heartBeatStart()},websocketonerror:function(t){console.log("websocketonerror"),this.clearHeartBeat(),this.isClosed||this.reconnect()},websocketclose:function(t){console.log("断开连接",this.isClosed),this.clearHeartBeat(),this.isClosed||this.reconnect()},websocketonmessage:function(t){var e=this,i=JSON.parse(t.data);if(i.msg_id){if(this.websock.send(n()({type:"msg_ack",msg_id:i.msg_id})),this.msg_id_list.indexOf(i.msg_id)>-1)return;this.msg_id_list.push(i.msg_id)}switch(i.type&&"conn_sucess"!==i.type&&this.audioPlay(),i.uid==this.userUid?(this.changeReadMessage(i.id),this.popNotice(this.memberInfo.nickname,i.data,i.uid,i.content_type)):this.userList.filter(function(t){t.uid==i.uid&&(t.un_read_num+=1,t.last_chat_content=i.data,e.popNotice(t.nickname,i.data,i.uid,i.content_type))}),i.type){case"init":return;case"text":if(this.userUid==i.uid){var s=parseInt(i.direction_type),a=this.generateChatData(i.data,s,i.time,i.content_type);a.id=parseInt(i.id);for(var o=[],c=0;c<this.chatList.length;c++)o.push(this.chatList[c]);o.push(a),this.chatList=o,this.$nextTick(function(){document.getElementById("chat-data")&&(document.getElementById("chat-data").scrollTop=1e4)})}else i.uid&&this.userUid!=i.uid&&this.getUserList();return;case"backed":for(var r=i.data,l=[],d=0;d<this.chatList.length;d++)this.chatList[d].id==r&&(this.chatList[d].is_backed=1),l.push(this.chatList[d]);return void(this.chatList=l)}},generateChatData:function(t,e,i,s){var n={id:0};return 2==s||3==s?n.content=JSON.parse(decodeURIComponent(t)):0==s?n.content=this.replaceEmoji(t):1==s&&(n.content=t),n.content_type=s,n.direction_type=e,n.created_at=i,n},fmtChatList:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)2==t[e].content_type||3==t[e].content_type?t[e].content=JSON.parse(decodeURIComponent(t[e].content)):0==t[e].content_type&&(t[e].content=this.replaceEmoji(t[e].content));else t instanceof Object&&(2==t.content_type||3==t.content_type?t.content=JSON.parse(decodeURIComponent(t.content)):0==t.content_type&&(t.content=this.replaceEmoji(t.content)));return t},replaceEmoji:function(t){var e=this;return t.replace(/face\[([^\s\[\]]+?)\]/g,function(t){return'<img src="'+e.emojiObjs[t].url+'" style="width:30px;height:30px;" />'})},getNowDateTime:function(){var t=new Date,e=t.getMonth()+1,i=t.getDate();return e>=1&&e<=9&&(e="0"+e),i>=0&&i<=9&&(i="0"+i),t.getFullYear()+"-"+e+"-"+i+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}}},G=(i("ZAV5"),Object(p.a)(E,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"chat-admin-contain"},[s("div",{staticClass:"chat-left-main"},[s("div",{staticClass:"chat-left-title"},[t._v("\n        当前会话\n      ")]),t._v(" "),s("div",{staticClass:"chat-left-customer-list"},t._l(t.userList,function(e,i){return s("div",{key:""+e.id+i,staticClass:"chat-l-item",class:[e.uid==t.userUid?"selected":"",e.uid==t.showCloseId?"to-selected":""],on:{click:function(i){t.changeChat(e)},mouseenter:function(i){t.chatMouseenter(e)},mouseleave:t.chatMouseleave}},[s("div",{staticClass:"chat-l-avater"},[e.un_read_num>0?s("div",{staticClass:"chat-unread-num"},[t._v(t._s(e.un_read_num))]):t._e(),t._v(" "),s("img",{attrs:{src:e.avatar}})]),t._v(" "),s("div",{staticClass:"chat-l-txt"},[s("div",{staticClass:"chat-l-txt-name"},[t._v("\n              "+t._s(e.nickname)+"\n            ")]),t._v(" "),s("div",{staticClass:"chat-l-txt-desc"},[t._v("\n              "+t._s(e.last_chat_content)+"\n            ")])]),t._v(" "),t.showCloseChat&&t.showCloseId==e.uid?s("i",{staticClass:"close_chat el-icon-close",on:{click:function(i){i.stopPropagation(),t.closeChat(e)}}}):t._e()])}))]),t._v(" "),s("div",{staticClass:"chat-center-main"},[t.currentReconnectNum>=t.maxReconnectNum?s("div",{staticClass:"no-connect"},[s("i",{staticClass:"el-icon-warning"}),t._v(" "),s("span",[t._v("当前网络不可用")])]):t._e(),t._v(" "),s("div",{staticClass:"chat-data",attrs:{id:"chat-data"}},[s("div",{ref:"chatBox",staticClass:"chat-area"},[s("div",{staticClass:"conversation"},[s("div",{staticClass:"history"},[t.page<t.total_page?s("div",{staticClass:"title",on:{click:t.showMore}},[t._v("查看历史会话")]):t._e()])]),t._v(" "),t._l(t.chatList,function(e,i){return s("div",{key:""+e.id+i,staticClass:"conversation"},[e.is_system_opt?[s("div",{staticClass:"system-opt-message"},[t._v("\n                "+t._s(e.content)+"\n              ")])]:e.is_backed?[s("div",{staticClass:"system-opt-message"},[0===e.direction_type?s("div",[t._v("您撤回了消息")]):t._e(),t._v(" "),1===e.direction_type?s("div",[t._v(t._s(t.memberInfo.nickname)+"撤回了消息")]):t._e()])]:[0===e.direction_type?s("div",{staticClass:"chat-msg my-msg"},[s("div",{staticClass:"avater"},[s("img",{attrs:{src:t.employeeInfo.avatar}})]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"my-name"},[s("span",{staticClass:"content-time"},[t._v("\n                      "+t._s(e.created_at)+"\n                    ")])]),t._v(" "),s("div",{staticClass:"my-info"},[s("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:t.chatShowMoreOpt[e.id],callback:function(i){t.$set(t.chatShowMoreOpt,e.id,i)},expression:"chatShowMoreOpt[item.id]"}},[s("div",{staticClass:"chat-content-opt",staticStyle:{cursor:"pointer"}},[s("div",{staticClass:"chat-content-opt-item",on:{click:function(i){i.stopPropagation(),t.backMsg(e)}}},[t._v("撤回")])]),t._v(" "),s("p",{staticClass:"txt",style:{padding:1==e.content_type?"25px":""},attrs:{slot:"reference"},slot:"reference"},[1==e.content_type?[s("ChatContentPic",{attrs:{item:e}})]:2==e.content_type?[s("ChatContentGoods",{attrs:{item:e}})]:3==e.content_type?[s("ChatContentOrder",{attrs:{item:e}})]:[s("ChatContentTxt",{attrs:{item:e}})]],2)]),t._v(" "),e.send_fail?s("div",[s("ChatContentFailed",{attrs:{item:e}})],1):t._e(),t._v(" "),s("div",{staticClass:"arrow-r"})],1)])]):1==e.direction_type?s("div",{staticClass:"chat-msg other-msg"},[s("div",{staticClass:"avater"},[s("img",{attrs:{src:t.memberInfo.avatar}})]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"other-name"},[s("span",{staticClass:"other-nickname"},[t._v(t._s(t.memberInfo.nickname))]),t._v(" "),s("span",{staticClass:"content-time"},[t._v("\n                      "+t._s(e.created_at)+"\n                    ")])]),t._v(" "),s("div",{staticClass:"other-info"},[s("p",{staticClass:"txt"},[1==e.content_type?[s("ChatContentPic",{attrs:{item:e}})]:2==e.content_type?[s("ChatContentGoods",{attrs:{item:e}})]:3==e.content_type?[s("ChatContentOrder",{attrs:{item:e}})]:[s("ChatContentTxt",{attrs:{item:e}})]],2),t._v(" "),e.send_fail?s("div",[s("ChatContentFailed",{attrs:{item:e}})],1):t._e(),t._v(" "),s("div",{staticClass:"arrow-l"})])])]):t._e()]],2)})],2)]),t._v(" "),s("div",{staticClass:"chat-opt"},[s("div",{staticClass:"chat-opt-header"},[s("div",{staticClass:"chat-opt-header-item"},[s("el-popover",{attrs:{placement:"top-start",trigger:"click"},model:{value:t.showEmoji,callback:function(e){t.showEmoji=e},expression:"showEmoji"}},[s("div",{staticClass:"emoticon-con"},[s("div",{staticClass:"faces_content"},t._l(t.emojiList,function(e){return s("span",{staticClass:"face-item",attrs:{title:e.text},on:{click:function(i){t.selectEmoji(e)}}},[s("img",{attrs:{src:e.url}})])}))]),t._v(" "),s("img",{attrs:{slot:"reference",src:i("llck"),title:"表情"},slot:"reference"})])],1),t._v(" "),1==t.chat_opt_setting.pic?s("div",{staticClass:"chat-opt-header-item"},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{"show-file-list":!1,"before-upload":t.beforeUpload1,"on-progress":t.onProgress1,"on-success":t.onSuccess,"on-error":t.onError,accept:"image/gif,image/jpeg,image/jpg,image/png",action:t.fun.getRealUrl("upload.uploadPic")}},[s("img",{attrs:{src:i("u81h"),title:"图片"}})])],1):t._e(),t._v(" "),1==t.chat_opt_setting.goods?s("div",{staticClass:"chat-opt-header-item",on:{click:t.showGoodsDialog}},[s("img",{attrs:{src:i("sNAR"),title:"商品"}})]):t._e(),t._v(" "),1==t.chat_opt_setting.transfer?s("div",{staticClass:"chat-opt-header-item",on:{click:t.showTransferDialog}},[s("img",{attrs:{src:i("TotV"),title:"转接客服"}})]):t._e()]),t._v(" "),s("div",{staticClass:"chat-opt-input"},[s("div",{staticClass:"chat-opt-input-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.msgText,expression:"msgText"}],staticClass:"edit-ipt",attrs:{id:"text_in",placeholder:"请输入消息",contenteditable:"true",hidefocus:"true",tabindex:"0"},domProps:{value:t.msgText},on:{paste:t.pasting,focus:function(e){t.clear()},click:function(e){e.stopPropagation(),t.clear()},keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleKeyDown(e):null},input:function(e){e.target.composing||(t.msgText=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"chat-opt-footer"},[s("p",{staticClass:"tips"},[t._v("回车键发送消息  Ctrl+回车键换行")]),t._v(" "),s("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",plain:""},on:{click:function(e){t.sendMsg(0)}}},[t._v("发送")])],1)])]),t._v(" "),s("el-dialog",{attrs:{title:"选择商品",visible:t.goodsDialogVisible,width:"800px"},on:{"update:visible":function(e){t.goodsDialogVisible=e}}},[s("el-form",{ref:"goodsSearch",attrs:{inline:!0,model:t.goodsSearch}},[s("el-row",[s("el-col",{attrs:{span:18}},[s("el-form-item",[s("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入商品名称"},model:{value:t.goodsSearch.kwd,callback:function(e){t.$set(t.goodsSearch,"kwd",e)},expression:"goodsSearch.kwd"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:6,align:"right"}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getGoodsList}},[t._v("查询\n              ")])],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"content",staticStyle:{height:"500px","overflow-y":"scroll"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsList,"empty-text":"暂无数据"}},[s("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),t._v(" "),s("el-table-column",{attrs:{label:"商品"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.thumb}}),t._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.selectGoods(e.row)}}},[t._v("发送")])]}}])})],1)],1)],1),t._v(" "),s("el-dialog",{attrs:{title:"选择客服",visible:t.transferDialogVisible,width:"800px"},on:{"update:visible":function(e){t.transferDialogVisible=e}}},[s("el-form",{ref:"transferSearch",attrs:{inline:!0,model:t.transferSearch}},[s("el-row",[s("el-col",{attrs:{span:18}},[s("el-form-item",[s("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入客服昵称或手机号"},model:{value:t.transferSearch.kwd,callback:function(e){t.$set(t.transferSearch,"kwd",e)},expression:"transferSearch.kwd"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:6,align:"right"}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getTransferEmployeeList}},[t._v("查询\n              ")])],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"content",staticStyle:{height:"500px","overflow-y":"scroll"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.transferEmployeeList,"empty-text":"暂无数据"}},[s("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),t._v(" "),s("el-table-column",{attrs:{prop:"nickname",label:"客服昵称"}}),t._v(" "),s("el-table-column",{attrs:{label:"客服电话"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.has_one_member.mobile)+"\n            ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.selectTransfer(e.row)}}},[t._v("转接")])]}}])})],1)],1)],1),t._v(" "),s("div",{staticClass:"chat-right-main"},[s("el-tabs",{on:{"tab-click":t.changeTab},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[s("el-tab-pane",{attrs:{label:"会员信息",name:"tab_member"}},[s("div",[s("div",{staticClass:"tab-member-item"},[s("span",{staticClass:"tab-member-item-title"},[t._v("会员ID：")]),t._v(" "),s("span",{staticClass:"tab-member-item-desc"},[t._v(t._s(t.memberInfo.uid))])]),t._v(" "),s("div",{staticClass:"tab-member-item"},[s("span",{staticClass:"tab-member-item-title"},[t._v("会员昵称：")]),t._v(" "),s("span",{staticClass:"tab-member-item-desc"},[t._v(t._s(t.memberInfo.nickname))])]),t._v(" "),s("div",{staticClass:"tab-member-item"},[s("span",{staticClass:"tab-member-item-title"},[t._v("绑定手机：")]),t._v(" "),s("span",{staticClass:"tab-member-item-desc"},[t._v(t._s(t.memberInfo.mobile))])]),t._v(" "),s("div",{staticClass:"tab-member-item"},[s("span",{staticClass:"tab-member-item-title"},[t._v("注册时间：")]),t._v(" "),s("span",{staticClass:"tab-member-item-desc"},[t._v(t._s(t.memberInfo.creat_time_fmt))])])])]),t._v(" "),1==t.chat_opt_setting.order?s("el-tab-pane",{attrs:{label:"历史订单",name:"tab_order"}},[s("el-form",{ref:"getOrderList",attrs:{inline:!0,model:t.orderSearch}},[s("el-row",[s("el-col",{attrs:{span:18}},[s("el-form-item",[s("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入订单号"},model:{value:t.orderSearch.order_sn,callback:function(e){t.$set(t.orderSearch,"order_sn",e)},expression:"orderSearch.order_sn"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:6,align:"right"}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getOrderList}},[t._v("查询\n                  ")])],1)],1)],1)],1),t._v(" "),t.orderList.length>0?s("el-collapse",{attrs:{accordion:""}},t._l(t.orderList,function(e,i){return s("el-collapse-item",{key:""+e.id+i,attrs:{title:"订单ID："+e.id+" 订单编号："+e.order_sn,name:e.id}},[s("div",[s("strong",[t._v("下单时间：")]),t._v(t._s(e.create_time)+"。")]),t._v(" "),e.package_deliver?s("div",[t._v("\n                "+t._s(e.package_deliver.package_deliver_name)+"\n              ")]):t._e(),t._v(" "),e.package_deliver&&e.package_deliver.deliver_clerk_name?s("div",[t._v("\n                "+t._s(e.package_deliver.deliver_clerk_name)+"\n              ")]):t._e(),t._v(" "),e.has_one_refund_apply?s("div",[t._v("\n                "+t._s(e.has_one_refund_apply.refund_type_name)+"："+t._s(e.has_one_refund_apply.status_name)+"\n              ")]):t._e(),t._v(" "),e.no_refund?s("div",{staticClass:"vue-ellipsis",staticStyle:{color:"red"}},[s("strong",[t._v("不可退款")])]):t._e(),t._v(" "),t._l(e.has_many_order_goods,function(e,i){return s("div",{staticClass:"list-con-goods"},[s("div",{staticClass:"list-con-goods-text",style:{justifyContent:e.goods_option_title?"":"center"}},[s("div",{staticClass:"list-con-goods-title",staticStyle:{color:"#29BA9C",cursor:"pointer"}},[t._v("商品："+t._s(e.title))]),t._v(" "),e.goods_option_title?s("div",{staticClass:"list-con-goods-option"},[t._v("规格："+t._s(e.goods_option_title)+"\n                  ")]):t._e()]),t._v(" "),s("div",{staticClass:"list-con-goods-price"},[s("div",[t._v("原价："+t._s(e.goods_price))]),t._v(" "),s("div",[t._v("应付："+t._s(e.price))]),t._v(" "),s("div",[t._v("数量："+t._s(e.total))])])])}),t._v(" "),s("div",[t._v("商品小计：￥"+t._s(e.goods_price))]),t._v(" "),s("div",[t._v("运费：￥"+t._s(e.dispatch_price))]),t._v(" "),"0.00"!=e.change_price?s("div",[t._v("卖家改价：￥"+t._s(e.change_price))]):t._e(),t._v(" "),"0.00"!=e.change_dispatch_price?s("div",[t._v("卖家改运费：￥"+t._s(e.change_dispatch_price))]):t._e(),t._v(" "),s("div",[t._v("应付款：￥"+t._s(e.price))]),t._v(" "),e.address?s("div",[t._v("\n                收货地址："+t._s(e.address.realname)+"   "+t._s(e.address.mobile)+"   "+t._s(e.address.address)+"\n              ")]):t._e(),t._v(" "),s("div",[s("el-button",{attrs:{type:"primary"},on:{click:function(i){t.selectOrder(e)}}},[t._v("发送\n                ")])],1)],2)})):t._e()],1):t._e(),t._v(" "),1==t.chat_opt_setting.reply?s("el-tab-pane",{attrs:{label:"个人快捷回复",name:"tab_person_reply"}},[s("div",{staticClass:"tab-notice-title"},[t._v("检索自己添加的快捷回复")]),t._v(" "),s("el-form",{ref:"personalReplySearch",attrs:{inline:!0,model:t.personalReplySearch}},[s("el-row",[s("el-col",{attrs:{span:18}},[s("el-form-item",[s("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入标题"},model:{value:t.personalReplySearch.kwd,callback:function(e){t.$set(t.personalReplySearch,"kwd",e)},expression:"personalReplySearch.kwd"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:6,align:"right"}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getPersonalReplyList}},[t._v("查询\n                  ")])],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"content"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.personalReplyList,"empty-text":"暂无数据"}},[s("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),s("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.selectReply(e.row)}}},[t._v("选择")])]}}])})],1)],1)],1):t._e(),t._v(" "),1==t.chat_opt_setting.reply?s("el-tab-pane",{attrs:{label:"公共快捷回复",name:"tab_common_reply"}},[s("div",{staticClass:"tab-notice-title"},[t._v("检索属于自己所在客服组的公共快捷回复")]),t._v(" "),s("el-form",{ref:"commonReplySearch",attrs:{inline:!0,model:t.commonReplySearch}},[s("el-row",[s("el-col",{attrs:{span:18}},[s("el-form-item",[s("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入标题"},model:{value:t.commonReplySearch.kwd,callback:function(e){t.$set(t.commonReplySearch,"kwd",e)},expression:"commonReplySearch.kwd"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:6,align:"right"}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getCommonReplyList}},[t._v("查询\n                  ")])],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"content"},[s("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":"700",data:t.commonReplyList,"empty-text":"暂无数据"}},[s("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),s("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){t.selectReply(e.row)}}},[t._v("选择")])]}}])})],1)],1)],1):t._e()],1)],1)],1),t._v(" "),s("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{id:"audio",src:t.notice_audio_url}},[t._v("\n    您的浏览器不支持 audio 标签！\n  ")])])},[],!1,null,"77b20368",null));G.options.__file="index.vue";e.default=G.exports},dP1y:function(t,e,i){"use strict";var s=i("Gz31");i.n(s).a},eOtT:function(t,e,i){},edgx:function(t,e,i){},ieHM:function(t,e,i){var s=i("Y7ZC"),n=i("QXhf");s(s.G+s.B,{setImmediate:n.set,clearImmediate:n.clear})},llck:function(t,e){t.exports="data:image/png;base64,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"},ndnO:function(t,e,i){t.exports={default:i("MjXf"),__esModule:!0}},rboA:function(t,e,i){"use strict";var s=i("HVHc");i.n(s).a},sNAR:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF8mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDItMDJUMDk6MzU6MzkrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTAyLTAyVDE0OjE0OjUxKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTAyLTAyVDE0OjE0OjUxKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM1ZmQ3Njg3LWEwMmEtNGNkMC1iNWViLWMyNmE0NTNlNjI1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkY2EzNGIyOC02NWIwLTRhYzgtOWJhNS05NDAxYjMyYjkxYmMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkY2EzNGIyOC02NWIwLTRhYzgtOWJhNS05NDAxYjMyYjkxYmMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmRjYTM0YjI4LTY1YjAtNGFjOC05YmE1LTk0MDFiMzJiOTFiYyIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0wMlQwOTozNTozOSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM1ZmQ3Njg3LWEwMmEtNGNkMC1iNWViLWMyNmE0NTNlNjI1NCIgc3RFdnQ6d2hlbj0iMjAyMS0wMi0wMlQxNDoxNDo1MSswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+k2bSswAABehJREFUeJztm09oHHUUxz9v/m3SZCNNmpYorQWPRQulB/9UqwhSqa0HTxZBvdgqvfUkCBWtHkWFInrQgxSEUItKsWIRrXoTbCuiN6UUKSuJMTGb3Z2Z3/OwO9vJZpPs7sxkErpfGHZ35vd78/19f++9efObWVFVbmVYeRPIG30B8iaQN/oC5E0gb/QFyJtA3ugLkDeBvOF02nBycvIOEbkHGARMdpQSwRKRsuu6lw8fPnyjkw4dC6Cq+4CTwCjrWABVnfJ9/1VgspMOHQsAjAA7gKEeiK0lhlX1tk4bd5MDfGBhpQYi0oW5zFCmzrUjdOMBAPERXgfOA/MisskYgzEG27ZZwzvMMlAEDgK3t+G4KroVII7vgGMiguM4zM3NoaoUi0XCMExgdjFEZJGgIoKIYEw9DakqqnpGRI70Yj+JAH7k8mEYsnnzZlSVcrmMZVlYltUk34tHRAOt1WrYtt20ZYyhVqvhum7c26q9DiJJHVCIvgRBwMjICMVikVqtZkN9ZhYWFgiCoClGpxARgiCgWq3i+4vDuVar4Xke4+PjVKtVbNvGsqyBXgeRxAOa09qYme2qesR13fuBG6r6ue/7540xBEGA4zi4rtt03eVgWRZBEOD7PqoaecKTwAERGVfVn13XPbNz584/K5UKpVKJwcFB7TX3JBHgphHHGSmVSqeBQzF3PWRZ1vPAV2EYYozB9308z2ubKKNZn5+fB4gP/nHgA2Bro+lTYRg+5Hne04VCYXp2dhbP83AcpycBEpfCjRg/aIw5FBFofE64rnsUEMuymvur1SrGmEUhISKEYUilUsEY0xyIMUZc130R2BrlEs/zEJHHrly58kSpVGJsbAzbtlf1rOXQswfEE5yI7LRte0kb13W3FwqFIjAb7YtmtnW2HMdheHi4NVcUjTET8bbRYGdmZnaJCIVCIdFlN1EIxMhea3PYGGN+U9W51fpHGT8SJmZ3DrgK7KHhrdFgPc/7q3GSRAVYzyEQEWmc/IIx5ouWJlMi8jGxZNnaPyqewjBsbkBzvzFGgU+AqahfY//XwNleuceRVg6YCsPwuKpejc2GraqDUZi0CLbERq1Wa+aHuCCqWgTsqG8QBL+Uy+WjxpjrSblDQgHihZCIXBOR72PxOCoiz7Umu5VsLXP8OWA0EmZiYuLixMTEH0NDQwRBkIQ+kFAAVcWyrHil9gMQZ/UocG+CUzwA7I9+GGMqAwMD34yOjiZOfhFSCQERoXGp+wy4HDs8ApwWkfFuE5WIbBORdxs2EBFc1/1pZmbmy+np6WbJnRSpLYk1XHgBeJPFCyZ7gE+Bu7swtxs41+gb2feBN6rValipVAiCIJXb71QEaCFyTlXfaWmyj/qAXgfGVjC1BTglImeB++IHVPUtVb3g+z7VajU1AVIphdvgpIiMG2OeiZG8S1VfUdUD1MPkGjfrhx2WZd0J7FbVvXFDjRD7kLp4i+qFNJCaAC3Zfg44LiJTwEuAGzu2F9gLhNxcYRoUkaWlZP2W+20ReU1E5qOdvZa97ZDlsvi/wAngKPA79QHHYQPDja118AF1L3kWeBn4LyuSWYVAhBD4CDivqi+IyCPALmDbMu1vAL8CF4H3gX8y5pe5ABFKwClVPWXb9sNBEDwIbLEsq0hdpDLwN3BJRC6tFN9puj+snQBxfNvYukYWi60b6tHYLS1AVkvtfQEysZoysnzQkqkASau2tKu+dliTq0D8rk1VidYPl1skaf1tWVbql7+m7UysdogVFkGWII1b37Z2M7GaEbIQYUMJAOmLsOEEgHTfQ0giQG5vQ7TJHT1zSSJAz4+k00BsHRJVXfvH46rqrIf/GjQ8wV2t3XJIUgfsB95T1QXqr87lgQXqq0n7V225DLoVoDnlIrIdONbriTNEV27ZTQi45DfT3WATXYRExx4gIrPUV3HX9YuS1B+kzq7WMELHAjiO82MYhidY56/KAguqerXTDrIeMnme2JCVYJroC5A3gbzRFyBvAnmjL0DeBPJGX4C8CeSN/wH1NJ1tOmHrcgAAAABJRU5ErkJggg=="},u81h:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEG0lEQVR4Xu2az4tTVxTHv+ddaaHOINROwakLceWMf0AdR9tFocJgdfGSE6KUYtFFlxYXriTYjVBod93UllKF8d4hA0o70kKZTf2BK7XacVHaSkctCSoyI6WQN7fcIZFrmrzcZCZvbszLLnnnnnu+n3fueefeF0Kff6jP9SMFkGZAnxNIl0CfJ0BaBNMlkC6BNghIKd8jouMAtgPY0MbQJEyfALittT6Zy+V+cJ3QeQlUxV9wdbzGdnuZ+XuXGJwBKKUuAdjp4tQDm8vMPO4SRzsAFgAMuDj1wOYRM290iaMdANp2yMzOY10CWamNUqqj+JxFdDrBSoW5ju80vhRAtwm7+l+pXZoBaQ3wrAjOzMy8vLi4eATAUQBbqyn+O4DPBwYGvpyYmPh3pWlvj/dqCUxOTg4LIX4CsK2JyDtRFL2Tz+fvrxYEbwBorWlqasp0jWMtxF3JZrPjRPTc87tTIN4AkFJ+SERfOQo5zMyutrEuvQGglLoK4E0r2vNBEJgdJJaWlk4B2G9du8bMtq0jt/+b+QTgKYBXaiEKIbaEYXjXfFdKvQFgvnZNa/00l8utyv7CGwBSykUiWm8BGA7D8IH5XiwWN0dR9NcLDaB+CWitJ4no/aGhISqXy2cB5F7oJdD3RbBQKAQjIyOXiGhHXEXTWl+dm5sbLxQKSx1XPmugNzXAKnY/AhhtIu5XAO8y871G12dnZ9eVSqVPiegAgBtBEBzLZDI340B5BcAEalrhhYWFw0T0sd0Ka60/GxwcPN2sFTbiy+VyEcA+q1g+JqK3mfmXZhC8A9BJWjcSb0MQQuzMZDJ3GvnueQBx4i3B5SAI3moEoacBxIg3Z/317x/K5nSamX+zM6FnAcSINwJ3AzgB4KO6tP/bXLMh9CSAVuKZ2Qg1LfQXrSD0HABX8bU7L6X8mogO1WdCFEVj+Xz+z54CoJQSAKbtR11V2HLa1+68LdacMyilzhDRwToI81EU7RZC/GH/7vreIvFj8ar4cwAydULMjnFHI/E1u2qX+W0jCAA2ew8gTrwQYlcYhs+2ys36CANhdHRUNgD43BDvMmA1xNcUxvh6BsErAKspvg5CozqybOINgG6Ir0GI6x69ANBN8TaEUqn0HRHt8aoIJiHeWg4vaa3/IaKg9tuaZkCM+HkhxJhLtW93NymljLwAECfeNCyma2tXnIu9FwBintHL3Vq3xBtAaw4grkvrtvhEAEgp7xHRsEs6emDzkJlfc4nDeS8gpfyGiD5wceqBzc/MbM4SWn6cAUxPT79eqVSuA9jU0usaGxDRRDabvegShjMA46xYLG6qVCqnq2f+r7pMkKDNE631LQCfdOWvsgkKSXSqtjIg0cgSmiwFkBBob6dJM8DbW5NQYGkGJATa22nSDPD21iQU2H8xfZRfAtycEQAAAABJRU5ErkJggg=="},xnLY:function(t,e,i){"use strict";var s=i("Zq6U");i.n(s).a}}]);