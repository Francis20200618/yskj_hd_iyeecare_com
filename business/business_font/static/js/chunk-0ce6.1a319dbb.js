(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ce6"],{"/umX":function(e,t,o){"use strict";t.__esModule=!0;var s=function(e){return e&&e.__esModule?e:{default:e}}(o("9dlP"));t.default=function(e,t,o){return t in e?(0,s.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},"7mjJ":function(e,t,o){var s=o("fCtq");s(s.S+s.F*!o("Xp5O"),"Object",{defineProperty:o("WXo7").f})},"8mNg":function(e,t,o){o("7mjJ");var s=o("zpmP").Object;e.exports=function(e,t,o){return s.defineProperty(e,t,o)}},"9dlP":function(e,t,o){e.exports={default:o("8mNg"),__esModule:!0}},CXqG:function(e,t,o){"use strict";var s=o("RULk");o.n(s).a},RULk:function(e,t,o){},hJj0:function(e,t,o){"use strict";o.r(t);var s,i=o("/umX"),r=o.n(i),a=o("bS4n"),l=o.n(a),n=o("glbJ"),c=o("ErL5"),u=o("2gMQ"),d={data:function(){return{id:0,form:{uid:"",nickname:"",avatar:"",work_wechat_userid:"",group_id:"",confirm_password:"",is_recommend:"",order_num:"",desc:""},uploadShow:!1,submit_url:"",is_edit:!1,member_keyword:"",member_show:!1,member_list:[],group_list:[],choosed_member:{},loading:!1,work_user_keyword:"",work_user_show:!1,work_user_list:[],choosed_work_user:{},rules:{uid:{required:!0,message:"请选择会员"},nickname:{required:!0,message:"请输入客服昵称"}}}},created:function(){},components:{Tinymce:n.a,uploadImg:c.a,yun_service_side:u.a},mounted:function(){this.id=this.$route.query.id,this.getGroup(),this.id?(this.is_edit=!0,this.submit_url="plugin/YunChat/employeeUpdate",this.getData()):this.submit_url="plugin/YunChat/employeeCreate"},methods:(s={goParent:function(){this.$router.push(this.fun.getUrl("serviceEmployeeList"))},getGroup:function(){var e=this;$http.pc_post("plugin/YunChat/groupQuery",{},"loading").then(function(t){t.result?e.group_list=t.data:e.$message({message:t.msg,type:"error"})},function(e){this.$message({message:e.msg,type:"error"})})},getData:function(){var e=this;$http.pc_post("plugin/YunChat/employeeGetDetail",{id:this.id},"loading").then(function(t){t.result?(e.form=l()({},t.data),e.form.group_id||(e.form.group_id=""),e.choosed_member=t.data.has_one_member,console.log(e.form),e.choosed_work_user=t.data.has_one_work_employee):e.$message({message:t.msg,type:"error"})},function(t){e.$message({message:t.msg,type:"error"})})},openMember:function(){this.member_show=!0},getMember:function(){var e=this;$http.pc_post("admin/businessGetMemberByMobile",{mobile:this.member_keyword}).then(function(t){t.result?e.member_list=t.data:e.$message({type:"error",message:t.msg})},function(t){e.$message({type:"error",message:t.msg}),console.log(t)})},chooseMember:function(e){this.choosed_member=e,this.form.uid=e.uid,this.member_show=!1,console.log(this.form)},clearMember:function(){this.choosed_member={},this.form.uid="",this.$forceUpdate()},openWorkUser:function(){this.work_user_show=!0},getWorkUser:function(){var e=this;$http.pc_post("admin/searchStaff",{kwd:this.work_user_keyword,is_qy_wx:1,disabled:0}).then(function(t){t.result?e.work_user_list=t.data:e.$message({type:"error",message:t.msg})},function(t){e.$message({type:"error",message:t.msg}),console.log(t)})},chooseWorkUser:function(e){this.choosed_work_user=e,this.form.work_wechat_userid=e.user_id,this.work_user_show=!1}},r()(s,"clearMember",function(){this.choosed_work_user={},this.form.work_wechat_userid="",this.$forceUpdate()}),r()(s,"submitForm",function(e){var t=this,o={uid:this.form.uid,nickname:this.form.nickname,avatar:this.form.avatar,work_wechat_userid:this.form.work_wechat_userid,group_id:this.form.group_id,is_recommend:this.form.is_recommend,order_num:this.form.order_num,desc:this.form.desc};this.id?o.id=this.id:(o.password=this.form.password,o.confirm_password=this.form.confirm_password),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;$http.pc_post(t.submit_url,o,"loading").then(function(e){e.result?(t.$message({type:"success",message:"操作成功!"}),t.goBack()):t.$message({message:e.msg,type:"error"})},function(e){})})}),r()(s,"goBack",function(){history.go(-1)}),r()(s,"openUpload",function(){this.uploadShow=!0}),r()(s,"sureImg",function(e){this.form.avatar=e}),r()(s,"clearImg",function(e){this.form[e]="",this.$forceUpdate()}),s)},m=(o("CXqG"),o("ZrdR")),_=Object(m.a)(d,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"all"},[o("yun_service_side",{attrs:{defaultActive:"serviceEmployeeList"}}),e._v(" "),o("div",{attrs:{id:"app"}},[o("div",{staticClass:"vue-crumbs"},[o("a",{on:{click:function(t){e.goParent()}}},[e._v("客服管理")]),e._v(" > 编辑客服\n    ")]),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"15%"}},[o("div",{staticClass:"vue-main"},[o("div",{staticClass:"vue-main-title"},[o("div",{staticClass:"vue-main-title-left"}),e._v(" "),o("div",{staticClass:"vue-main-title-content"},[e._v("编辑客服")])]),e._v(" "),o("div",{staticClass:"vue-main-form"},[o("el-form-item",{attrs:{label:"会员",prop:"uid"}},[e.form.uid?e._e():o("div",{staticClass:"upload-box",on:{click:function(t){e.openMember()}}},[o("div",{staticClass:"upload-box-member"},[o("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"32px"}}),o("br"),e._v("\n                选 择\n              ")])]),e._v(" "),e.form.uid?o("div",{staticClass:"upload-boxed"},[o("img",{staticStyle:{width:"150px",height:"150px","border-radius":"5px",cursor:"pointer"},attrs:{src:e.choosed_member.avatar,alt:""},on:{click:function(t){e.openMember()}}}),e._v(" "),o("div",{staticClass:"upload-boxed-text"},[e._v("重新选择")]),e._v(" "),o("div",{staticClass:"upload-boxed-text-clear",on:{click:function(t){e.clearMember("uid")}}},[e._v("清除选择")]),e._v(" "),o("div",{staticStyle:{"text-align":"center","line-height":"20px"}},[e._v(e._s(e.choosed_member.nickname))])]):e._e()]),e._v(" "),o("el-form-item",{attrs:{label:"企业微信成员",prop:"work_wechat_userid"}},[e.form.work_wechat_userid?e._e():o("div",{staticClass:"upload-box",on:{click:function(t){e.openWorkUser()}}},[o("div",{staticClass:"upload-box-member"},[o("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"32px"}}),o("br"),e._v("\n                选 择\n              ")])]),e._v(" "),e.form.work_wechat_userid?o("div",{staticClass:"upload-boxed"},[o("img",{staticStyle:{width:"150px",height:"150px","border-radius":"5px",cursor:"pointer"},attrs:{src:e.choosed_work_user.avatar,alt:""},on:{click:function(t){e.openWorkUser()}}}),e._v(" "),o("div",{staticClass:"upload-boxed-text"},[e._v("重新选择")]),e._v(" "),o("div",{staticClass:"upload-boxed-text-clear",on:{click:function(t){e.clearWorkUser()}}},[e._v("清除选择")]),e._v(" "),o("div",{staticStyle:{"text-align":"center","line-height":"20px"}},[e._v(e._s(e.choosed_work_user.name))])]):e._e(),e._v(" "),o("div",{staticClass:"tip"},[e._v("提示: 如果不选择企业微信成员，当该客服不在线时，不能收到用户新消息提醒的企业微信通知")])]),e._v(" "),o("el-form-item",{attrs:{label:"客服昵称",prop:"nickname"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"客服聊天时显示的昵称"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"客服组",prop:"group_id"}},[o("el-select",{attrs:{clearable:"",placeholder:"请选择客服组"},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}},e._l(e.group_list,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[e.form.avatar?e._e():o("div",{staticClass:"upload-box",on:{click:e.openUpload}},[o("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"32px"}})]),e._v(" "),e.form.avatar?o("div",{staticClass:"upload-boxed",on:{click:e.openUpload}},[o("img",{staticStyle:{width:"150px",height:"150px","border-radius":"5px",cursor:"pointer"},attrs:{src:e.form.avatar,alt:""}}),e._v(" "),o("div",{staticClass:"upload-boxed-text"},[e._v("点击重新上传")])]):e._e(),e._v(" "),o("div",{staticClass:"tip"},[e._v("提示: 100*100px或正方型图片")])]),e._v(" "),o("el-form-item",{attrs:{label:"推荐",prop:"is_recommend"}},[o("div",[e._v("\n              "+e._s(e.form.is_recommend?"是":"否")+"\n              "),o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.is_recommend,callback:function(t){e.$set(e.form,"is_recommend",t)},expression:"form.is_recommend"}})],1),e._v(" "),o("div",{staticClass:"tip"},[e._v("选中推荐，可以在装修客服聚合页面展示")])]),e._v(" "),o("el-form-item",{attrs:{label:"排序",prop:"order_num"}},[o("el-input",{staticStyle:{width:"70%"},attrs:{type:"number"},model:{value:e.form.order_num,callback:function(t){e.$set(e.form,"order_num",t)},expression:"form.order_num"}}),e._v(" "),o("div",{staticClass:"tip"},[e._v("数字越多，排序越靠前")])],1),e._v(" "),o("el-form-item",{attrs:{label:"介绍",prop:"desc"}},[o("div",{staticStyle:{width:"85%",margin:"0 auto"}},[o("tinymce",{model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)])],1)])]),e._v(" "),o("el-dialog",{attrs:{title:"选择会员",visible:e.member_show,width:"60%"},on:{"update:visible":function(t){e.member_show=t}}},[o("div",[o("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"会员手机号码"},model:{value:e.member_keyword,callback:function(t){e.member_keyword=t},expression:"member_keyword"}}),e._v(" "),o("el-button",{on:{click:e.getMember}},[e._v("搜索")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"500px",overflow:"auto"},attrs:{data:e.member_list}},[o("el-table-column",{attrs:{label:"ID",prop:"uid",align:"center",width:"100px"}}),e._v(" "),o("el-table-column",{attrs:{label:"会员信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","align-items":"center"}},[t.row.avatar_image?o("div",{staticStyle:{width:"40px"}},[o("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:t.row.avatar_image,alt:""}})],1):e._e(),e._v(" "),o("div",{staticStyle:{flex:"1"}},[e._v("【id:"+e._s(t.row.uid)+"】"+e._s(t.row.nickname))])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"refund_time",label:"操作",align:"center",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{on:{click:function(o){e.chooseMember(t.row)}}},[e._v("\n              选择\n            ")])]}}])})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.member_show=!1}}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"企业微信成员",visible:e.work_user_show,width:"60%"},on:{"update:visible":function(t){e.work_user_show=t}}},[o("div",[o("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"成员信息"},model:{value:e.work_user_keyword,callback:function(t){e.work_user_keyword=t},expression:"work_user_keyword"}}),e._v(" "),o("el-button",{on:{click:e.getWorkUser}},[e._v("搜索")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"500px",overflow:"auto"},attrs:{data:e.work_user_list}},[o("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"100px"}}),e._v(" "),o("el-table-column",{attrs:{label:"会员信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","align-items":"center"}},[t.row.avatar?o("div",{staticStyle:{width:"40px"}},[o("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:t.row.avatar,alt:""}})],1):e._e(),e._v(" "),o("div",{staticStyle:{flex:"1"}},[e._v("【id:"+e._s(t.row.id)+"】"+e._s(t.row.name))])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"refund_time",label:"操作",align:"center",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{on:{click:function(o){e.chooseWorkUser(t.row)}}},[e._v("\n              选择\n            ")])]}}])})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.work_user_show=!1}}},[e._v("取 消")])],1)],1),e._v(" "),o("div",{staticClass:"vue-page"},[o("div",{staticClass:"vue-center"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("提交")]),e._v(" "),o("el-button",{on:{click:e.goBack}},[e._v("返回")])],1)]),e._v(" "),o("upload-img",{attrs:{centerDialogVisible:e.uploadShow},on:{changeVisible:function(t){e.uploadShow=!1},sureImg:e.sureImg}})],1)],1)},[],!1,null,"14f8a1b2",null);_.options.__file="employee_detail.vue";t.default=_.exports}}]);