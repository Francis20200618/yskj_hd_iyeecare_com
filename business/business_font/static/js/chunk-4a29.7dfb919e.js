(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a29"],{"/s/L":function(t,e,a){"use strict";a.r(e);var s=a("FyfS"),i=a.n(s),n=a("EJiy"),r=a.n(n),l=a("QbLZ"),o=a.n(l),c=a("/f1G"),_=a.n(c),u=a("14Xm"),d=a.n(u),p=a("gDS+"),v=a.n(p),m=a("D3Ub"),h=a.n(m),f=a("fb88"),b=a("IFkG"),k=a("TXmZ"),g={components:{sop_manage_side:f.a,tag_dialog:b.a,content_card:k.a},data:function(){return{search:{task_type:1,name:"",is_open:1,execution_type:[],task_set:{tag_list:[],send_time_type:1,send_time:""}},date:"",couponDialogVisible:!1,tag_axios_url:"plugin/SopTask/getTagList",dataShowList:[],testSlogan:"感谢您的关注，我们将竭诚为您服务!",nicknameList:[{name:"客户昵称",value:"{{客户昵称}}"}],styleContext:{position:"absolute",right:0,top:"-120px",height:"622px"},avatar:"",info_show:!0,info_save:!1}},mounted:function(){this.$route.query.id&&this.editDataShow()},methods:{editDataShow:function(){var t=this;return h()(d.a.mark(function e(){var a,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.info_show=!1,e.next=3,$http.pc_post("plugin/SopTask/getTaskDetail",{id:t.$route.query.id});case 3:1==(a=e.sent).result?(t.dataShowList=a.data.content_list,s=JSON.parse(v()(a.data)),t.date=[s.task_set.start_time,s.task_set.end_time],delete s.content_list,delete s.created_at,delete s.task_set.start_time,delete s.task_set.end_time,t.search=s,t.info_show=!0):(t.info_show=!0,t.$message.error(a.msg));case 5:case"end":return e.stop()}},e,t)}))()},selectTag:function(){this.couponDialogVisible=!0},couponChangeVisible:function(t){this.couponDialogVisible=t},couponOptionData:function(t){_()(t.data).length>0&&(0==this.search.task_set.tag_list.filter(function(e){return e.id==t.data.id}).length&&this.search.task_set.tag_list.push(t.data))},delTagContext:function(t){this.search.task_set.tag_list.splice(t,1)},submit:function(){var t=this;return h()(d.a.mark(function e(){var a,s,n,l,c,_,u,p,m,h;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.info_save){e.next=2;break}return e.abrupt("return");case 2:return t.info_save=!0,(a=o()({},JSON.parse(v()(t.search)),{content_list:t.$refs.content_card.submitData})).task_set.start_time=""!==t.date?t.date[0]:"",a.task_set.end_time=""!==t.date?t.date[1]:"",2==t.search.task_set.send_time_type&&(a.task_set.send_time=""),e.next=8,$http.pc_post("plugin/SopTask/saveTask",{id:t.$route.query.id?t.$route.query.id:"",form:a});case 8:if(!(s=e.sent).result){e.next=15;break}t.$message.success(s.msg),t.$router.push(t.fun.getUrl("memberSop",{},{})),t.info_save=!1,e.next=46;break;case 15:if(n=[],"object"!=r()(s.msg)){e.next=44;break}e.t0=d.a.keys(s.msg);case 18:if((e.t1=e.t0()).done){e.next=41;break}for(l=e.t1.value,c=!0,_=!1,u=void 0,e.prev=23,p=i()(s.msg[l]);!(c=(m=p.next()).done);c=!0)h=m.value,n.push(h);e.next=31;break;case 27:e.prev=27,e.t2=e.catch(23),_=!0,u=e.t2;case 31:e.prev=31,e.prev=32,!c&&p.return&&p.return();case 34:if(e.prev=34,!_){e.next=37;break}throw u;case 37:return e.finish(34);case 38:return e.finish(31);case 39:e.next=18;break;case 41:t.$message.error(n.toString()),e.next=45;break;case 44:t.$message.error(s.msg);case 45:t.info_save=!1;case 46:case"end":return e.stop()}},e,t,[[23,27,31,39],[32,,34,38]])}))()}}},x=(a("FO/o"),a("KHd+")),y=Object(x.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all"},[a("sop_manage_side",{attrs:{defaultActive:"memberSop"}}),t._v(" "),a("div",{staticStyle:{width:"calc(100% - 150px)"},attrs:{id:"app"}},[a("div",{staticClass:"news-sop"},[t._m(0),t._v(" "),a("div",{staticClass:"vue-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"任务名称"}},[a("el-input",{staticStyle:{width:"30%"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否开启"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.search.is_open,callback:function(e){t.$set(t.search,"is_open",e)},expression:"search.is_open"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择执行人"}},[a("el-checkbox-group",{model:{value:t.search.execution_type,callback:function(e){t.$set(t.search,"execution_type",e)},expression:"search.execution_type"}},[a("el-checkbox",{attrs:{label:1}},[t._v("关系链上级第一位成员")]),t._v(" "),a("el-checkbox",{attrs:{label:2}},[t._v("首次添加企业微信成员")]),t._v(" "),a("el-checkbox",{attrs:{label:3}},[t._v("随机抽选一位成员")])],1),t._v(" "),a("div",{staticClass:"tip"},[t._v("优先级从左到右")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"news-sop"},[t._m(1),t._v(" "),a("div",{staticClass:"vue-search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"任务条件"}},[a("el-button",{attrs:{type:"plain",size:"medium"},on:{click:t.selectTag}},[a("i",{staticClass:"el-icon-plus"}),t._v("选择标签")]),t._v(" "),a("div",{staticClass:"tip"},[t._v("拥有选择标签的用户则是达成任务条件,每个标签用户只执行一次")])],1),t._v(" "),a("el-form-item",{attrs:{label:" "}},[a("div",{staticClass:"tag-card"},t._l(t.search.task_set.tag_list,function(e,s){return a("span",{key:s,staticClass:"tag-context"},[a("i",{staticClass:"el-icon-close",on:{click:function(e){t.delTagContext(s)}}}),t._v(t._s(e.name))])}))]),t._v(" "),a("el-form-item",{attrs:{label:"任务时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"推送时间"}},[a("el-radio",{attrs:{label:1},model:{value:t.search.task_set.send_time_type,callback:function(e){t.$set(t.search.task_set,"send_time_type",e)},expression:"search.task_set.send_time_type"}},[t._v("固定时间")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.search.task_set.send_time_type,callback:function(e){t.$set(t.search.task_set,"send_time_type",e)},expression:"search.task_set.send_time_type"}},[t._v("达成任务条件推送")]),t._v(" "),a("div",{staticClass:"tip"},[t._v("设置时间推送通知执行人")]),t._v(" "),1===t.search.task_set.send_time_type?a("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:t.search.task_set.send_time,callback:function(e){t.$set(t.search.task_set,"send_time",e)},expression:"search.task_set.send_time"}},[a("el-option",{attrs:{label:"每天0:00",value:"0:00"}}),t._v(" "),t._l(24,function(t){return a("el-option",{key:t,attrs:{label:"每天"+t+":00",value:t+":00"}})})],2):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"任务内容设置"}}),t._v(" "),a("el-form-item",{attrs:{label:" ","label-width":"45px"}},[t.info_show?a("content_card",{ref:"content_card",attrs:{textState:"more",avatar:t.avatar,testSlogan:t.testSlogan,nicknameList:t.nicknameList,dataShowList:t.dataShowList,styleContext:t.styleContext}}):t._e()],1)],1)],1)]),t._v(" "),a("div",{staticClass:"sendButtons"},[a("el-button",{staticStyle:{background:"#5ab79c","border-color":"#5ab79c"},attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)]),t._v(" "),a("tag_dialog",{attrs:{couponDialogVisible:t.couponDialogVisible,axios_url:t.tag_axios_url},on:{couponChangeVisible:t.couponChangeVisible,couponOptionData:t.couponOptionData}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-main-title"},[e("div",{staticClass:"vue-main-title-left"}),this._v(" "),e("div",{staticClass:"vue-main-title-content"},[this._v("基础设置")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-main-title"},[e("div",{staticClass:"vue-main-title-left"}),this._v(" "),e("div",{staticClass:"vue-main-title-content"},[this._v("任务设置")])])}],!1,null,"81065b12",null);y.options.__file="member_sop_editor.vue";e.default=y.exports},"FO/o":function(t,e,a){"use strict";var s=a("cOzH");a.n(s).a},cOzH:function(t,e,a){}}]);