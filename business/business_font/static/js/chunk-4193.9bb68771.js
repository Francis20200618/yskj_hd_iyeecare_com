(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4193"],{"8pgA":function(e,t,a){},I9pr:function(e,t,a){"use strict";a.r(t);var n={name:"PlatformUserList",data:function(){return{Info:{},list:[],pageSize:0,current_page:0,total:0,form:{},search_form:{},table_loading:!1,dialogTableVisible:!1,change_pwd_id:"",id:"",rules:{}}},created:function(){this.id=this.$route.params.id,this.currentChange(1)},destroyed:function(){},methods:{toAdd:function(){1==this.is_show_add&&this.$router.push(this.fun.getUrl("add_platform"))},currentChange:function(e){var t=this;$http.post("plugin.yun-sign.frontend.contract-num-log.get-list",{page:e,start:this.search_form.start,end:this.search_form.end,account_name:this.search_form.account_name,income_type:this.search_form.income_type},"loading").then(function(e){1===e.result?(t.Info=e.data,t.total=e.data.list.total,t.pageSize=e.data.list.per_page,t.list=e.data.list.data,t.current_page=e.data.list.current_page):(t.list=[],-1===e.data.status&&t.currentChange(1),t.$message.error(e.msg))}).catch(function(e){console.error(e)})},changePwd:function(){console.log(this.change_pwd_id),this.dialogTableVisible=!1},delRow:function(e,t){var a=this;this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},r=(a("mRio"),a("ZrdR")),l=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right"},[a("div",{staticClass:"right-head"},[a("div",{staticClass:"right-head-con"},[a("div",{staticClass:"item"},[e._v("购买总数："+e._s(e.Info.contract_num_sum))]),e._v(" "),a("div",{staticClass:"item"},[e._v("已使用数量："+e._s(e.Info.use_num_sum))]),e._v(" "),a("div",{staticClass:"item"},[e._v("可使用数量："+e._s(e.Info.rest_num_sum))])])]),e._v(" "),a("el-form",{ref:"search_form",attrs:{inline:!0,model:e.search_form}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form-item",[a("el-date-picker",{attrs:{placeholder:"选择购买开始时间"},model:{value:e.search_form.start,callback:function(t){e.$set(e.search_form,"start",t)},expression:"search_form.start"}})],1),e._v(" "),a("el-form-item",[a("el-date-picker",{attrs:{placeholder:"选择购买结束时间"},model:{value:e.search_form.end,callback:function(t){e.$set(e.search_form,"end",t)},expression:"search_form.end"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.search_form.income_type,callback:function(t){e.$set(e.search_form,"income_type",t)},expression:"search_form.income_type"}},[a("el-option",{attrs:{label:"购买",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"使用",value:"-1"}})],1)],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入用户姓名或帐号"},model:{value:e.search_form.account_name,callback:function(t){e.$set(e.search_form,"account_name",t)},expression:"search_form.account_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3,align:"right"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.currentChange(1)}}},[e._v("查询\n          ")])],1)],1)],1)],1),e._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table_loading,expression:"table_loading"}],staticStyle:{width:"100%"},attrs:{data:e.list}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"change_mode",label:"业务类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"has_one_person.name",label:"用户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{width:"180px",prop:"created_at",label:"时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"after_num",label:"合同可用数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contract_num",label:"合同数量变动",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{width:"180px",label:"有效期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contract_num>0?t.row.end_time:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}})],1),e._v(" "),a("el-col",{staticStyle:{padding:"15px 5% 15px 0"},attrs:{span:24,align:"right"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","current-page":e.current_page,"page-size":e.pageSize,total:e.total,background:""},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current_page=t}}})],1)],e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"20%"}},[a("el-form-item",{attrs:{label:"原密码",prop:"pwd"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"text"},model:{value:e.form.pwd,callback:function(t){e.$set(e.form,"pwd",t)},expression:"form.pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"new_pwd"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"text"},model:{value:e.form.new_pwd,callback:function(t){e.$set(e.form,"new_pwd",t)},expression:"form.new_pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认新密码",prop:"again_pwd"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"text"},model:{value:e.form.again_pwd,callback:function(t){e.$set(e.form,"again_pwd",t)},expression:"form.again_pwd"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changePwd()}}},[e._v("确 定")])],1)],1)],2)},[],!1,null,"4ce5a9b5",null);l.options.__file="contract_bills.vue";t.default=l.exports},mRio:function(e,t,a){"use strict";var n=a("8pgA");a.n(n).a}}]);