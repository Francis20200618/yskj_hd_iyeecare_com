(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-76b3"],{"/f1G":function(e,t,a){e.exports={default:a("nhzr"),__esModule:!0}},E8gZ:function(e,t,a){var r=a("jmDH"),n=a("w6GO"),i=a("NsO/"),s=a("NV0k").f;e.exports=function(e){return function(t){for(var a,o=i(t),c=n(o),l=c.length,u=0,d=[];l>u;)a=c[u++],r&&!s.call(o,a)||d.push(e?[a,o[a]]:o[a]);return d}}},Enqw:function(e,t,a){"use strict";var r=a("McIS");a.n(r).a},Ex6u:function(e,t,a){"use strict";var r=a("Rfk6");a.n(r).a},IQ7c:function(e,t,a){},McIS:function(e,t,a){},Mxtk:function(e,t,a){"use strict";var r=a("IQ7c");a.n(r).a},Rfk6:function(e,t,a){},Ua5R:function(e,t,a){"use strict";a.r(t);var r=a("QbLZ"),n=a.n(r),i=a("/f1G"),s=a.n(i),o=a("14Xm"),c=a.n(o),l=a("FyfS"),u=a.n(l),d=a("D3Ub"),m=a.n(d),p=a("GQeE"),f=a.n(p),h=a("RCcY"),_=a("L2JU"),b={props:{defaultActive:{type:String,default:"customerRadarSet"}},data:function(){return{router_list:[{category_id:"customerRadarSet",category_title:"基础设置",routers:[]}]}},components:{sideItem:h.a},computed:n()({},Object(_.b)(["permission_routers","userInfo","globalData"])),watch:{permission_routers:function(e,t){this.signRouters(e)}},mounted:function(){this.signRouters()},methods:{signRouters:function(e){var t=[];this.globalData.tab&&(t=this.globalData.tab.filter(function(e){return"customerRadar"===e.route}));var a=(e||this.permission_routers).filter(function(e){return"customerRadar"===e.name});if(a[0]&&this.router_list.map(function(e){a[0].children.map(function(t){t.class_id==e.category_id&&e.routers.push(t)})}),t[0]){var r={};t[0].child.map(function(e){r[e.route]=e.child.map(function(e){return e.route})}),this.router_list.map(function(e){f()(r).indexOf(e.category_id)<0&&(e.hidden=!0),e.routers.map(function(t){r[e.category_id]&&r[e.category_id].indexOf(t.name)<0&&(t.notShow=!0)})})}}}},v=(a("Ex6u"),a("KHd+")),g=Object(v.a)(b,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"second-side-box"},[t("div",{staticStyle:{width:"150px"}}),this._v(" "),t("div",{staticClass:"second-side-box-fixed"},[t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":this.defaultActive}},this._l(this.router_list,function(e){return t("side-item",{key:e.category_id,attrs:{item:e}})}))],1)])},[],!1,null,"2788fd02",null);g.options.__file="customer_radar_side.vue";var x=g.exports,k={props:{selectMemberVisible:{type:Boolean,default:!1},selectCouponType:{type:String,default:""}},components:{},data:function(){return{keyword:"",page:1,total:"",pageSize:0,tableData:[],oneShow:!1}},computed:{},created:function(){},mounted:function(){this.getActivityList()},methods:{search:function(){this.getActivityList()},select:function(e){e&&this.$emit("selectMemberData",{data:e,couponType:this.selectCouponType}),this.$emit("selectMemberList",!1)},getActivityList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return m()(c.a.mark(function a(){var r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,$http.pc_post("plugin/CustomerRadar/getMemberList",{page:t,search:{member:e.keyword}});case 2:1==(r=a.sent).result?(e.total=r.data.total,e.pageSize=r.data.per_page,e.tableData=r.data.data,e.oneShow=!0):(e.$message.error(r.msg),e.oneShow=!0);case 4:case"end":return a.stop()}},a,e)}))()}}},w=(a("Enqw"),Object(v.a)(k,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group_coupon_dialog"},[a("el-dialog",{attrs:{center:"",title:"选择会员",visible:e.selectMemberVisible,"before-close":e.select,width:"50%"},on:{"update:visible":function(t){e.selectMemberVisible=t}}},[a("div",{staticStyle:{display:"flex",width:"95%"}},[a("el-input",{attrs:{placeholder:"会员姓名/手机号"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",height:"500px","overflow-y":"auto"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"uid",label:"ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",align:"center",label:"会员名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",align:"center",label:"手机号码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:""},on:{click:function(a){e.select(t.row)}}},[e._v("选择")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.page},on:{"current-change":e.getActivityList}})],1)],1)},[],!1,null,"eabbdb56",null));w.options.__file="select_member_dialog.vue";var y={data:function(){return{selectMemberVisible:!1,addDepartmentTipsShow:!1,departmentDataUrl:"plugin/CustomerRadar/getDepartmentMember",jsonForm:{is_open:0,agent_id:"",agent_secret:"",is_notice:0},checkboxArr:[],checkboxIds:{},member_ids:[],rules:{agent_id:[{required:!0,message:"请输入agent_id",trigger:"blur"}],agent_secret:[{required:!0,message:"agent_secret",trigger:"blur"}]}}},created:function(){this.getData()},methods:{getData:function(){var e=this;return m()(c.a.mark(function t(){var a,r,n,i,s,o,l,d,m,p,f,h,_,b,v,g,x,k;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$http.pc_post("plugin/CustomerRadar/getSet");case 2:for((a=t.sent).result||e.$message.error(a.msg),r=a.data,n=r.is_open,i=r.agent_id,s=r.agent_secret,o=r.is_notice,l=r.exclude_member,d=void 0===l?[]:l,m=r.push_range,p=void 0===m?[]:m,e.jsonForm={is_open:n,agent_id:i,agent_secret:s,is_notice:o},e.member_ids=d,f=[],h={},_=!0,b=!1,v=void 0,t.prev=12,g=u()(p);!(_=(x=g.next()).done);_=!0)k=x.value,h[k.id]=k,f.push(k);t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),b=!0,v=t.t0;case 20:t.prev=20,t.prev=21,!_&&g.return&&g.return();case 23:if(t.prev=23,!b){t.next=26;break}throw v;case 26:return t.finish(23);case 27:return t.finish(20);case 28:e.checkboxArr=f,e.checkboxIds=h;case 30:case"end":return t.stop()}},t,e,[[12,16,20,28],[21,,23,27]])}))()},openMemberChoice:function(){this.selectMemberVisible=!0},selectMemberList:function(e){this.selectMemberVisible=e},getSelectMemberData:function(e){s()(e.data).length>0&&(0==this.member_ids.filter(function(t){return t.uid==e.data.uid}).length&&this.member_ids.push(e.data))},delSelectMembers:function(e){this.member_ids.splice(e,1)},departmentChoiceChange:function(e){},departmentChoiceComfirm:function(e){this.checkboxArr=e.checkboxArr,this.checkboxIds=e.checkboxIds,console.log(this.checkboxArr)},openDepartmentChoice:function(){var e=this;this.addDepartmentTipsShow=!0,this.$nextTick(function(){e.$refs.dialog_choice_department_staff.setChoiceData(e.checkboxIds)})},delSelectDepartment:function(e,t){"staff"==t.type?delete this.checkboxIds[t.user_id]:delete this.checkboxIds[t.id];var a=[];for(var r in this.checkboxIds)a.push(this.checkboxIds[r]);this.checkboxArr=a},submit:function(){var e=this;return m()(c.a.mark(function t(){var a,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:if(t.sent){t.next=6;break}return t.abrupt("return",!1);case 6:return a=n()({},e.jsonForm,{exclude_member:e.member_ids,push_range:e.checkboxArr}),t.next=9,$http.pc_post("plugin/CustomerRadar/saveSet",{form:a});case 9:(r=t.sent).result?location.reload():e.$message.error(r.msg),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}},t,e,[[0,13]])}))()}},components:{customerRadarSide:x,selectMemberDialog:w.exports,dialog_choice_department_staff:a("x8Yw").a}},C=(a("Mxtk"),Object(v.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all"},[a("customer-radar-side",{attrs:{defaultActive:"base_set"}}),e._v(" "),a("div",{staticStyle:{width:"calc(100% - 150px)"},attrs:{id:"app"}},[a("div",{staticClass:"plane-box"},[e._m(0),e._v(" "),a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.jsonForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"插件开启"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.jsonForm.is_open,callback:function(t){e.$set(e.jsonForm,"is_open",t)},expression:"jsonForm.is_open"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"AgentId",prop:"agent_id"}},[a("el-input",{model:{value:e.jsonForm.agent_id,callback:function(t){e.$set(e.jsonForm,"agent_id","string"==typeof t?t.trim():t)},expression:"jsonForm.agent_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"AgentSecret",prop:"agent_secret"}},[a("el-input",{model:{value:e.jsonForm.agent_secret,callback:function(t){e.$set(e.jsonForm,"agent_secret","string"==typeof t?t.trim():t)},expression:"jsonForm.agent_secret"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业成员访问通知"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.jsonForm.is_notice,callback:function(t){e.$set(e.jsonForm,"is_notice",t)},expression:"jsonForm.is_notice"}}),e._v(" "),a("div",[e._v("默认关闭，企业成员绑定会员访问商城，不进行应用通知。")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排除会员"}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:e.openMemberChoice}}),e._v(" "),a("div",[e._v("支持添加多个会员，排除会员访问商城，不进行应用通知。")]),e._v(" "),a("div",{staticClass:"choice-member"},e._l(e.member_ids,function(t,r){return a("span",{key:r},[a("span",{staticClass:"row_card"},[a("i",{staticClass:"iconfont icon-fontclass-rengezhongxin",staticStyle:{color:"#29ba9c"}}),e._v("\n                "+e._s(t.nickname)+"\n                "),a("i",{staticClass:"el-icon-close",on:{click:function(a){e.delSelectMembers(r,t)}}})])])}))]),e._v(" "),a("el-form-item",{attrs:{label:"通知范围"}},[a("div",{staticClass:"select-btn",on:{click:e.openDepartmentChoice}},[e._v("选择")]),e._v(" "),a("div",e._l(e.checkboxArr,function(t,r){return a("span",{key:"staff"==t.type?t.user_id:t.id},[a("span",{staticClass:"row_card"},[a("i",{staticClass:"iconfont icon-fontclass-rengezhongxin"}),e._v("\n                "+e._s(t.name)+"\n              ")]),e._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(a){e.delSelectDepartment(r,t)}}})])}))])],1)],1),e._v(" "),a("div",{staticClass:"vue-page"},[a("el-row",[a("el-col",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1),e._v(" "),a("select-member-dialog",{attrs:{selectMemberVisible:e.selectMemberVisible},on:{selectMemberData:e.getSelectMemberData,selectMemberList:e.selectMemberList}}),e._v(" "),a("dialog_choice_department_staff",{ref:"dialog_choice_department_staff",attrs:{from:"radar",dataUrl:e.departmentDataUrl,show:e.addDepartmentTipsShow},on:{change:e.departmentChoiceChange,confirm:e.departmentChoiceComfirm,"update:show":function(t){e.addDepartmentTipsShow=t}}})],1)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-main-title"},[t("div",{staticClass:"vue-main-title-left"}),this._v(" "),t("div",{staticClass:"vue-main-title-content"},[this._v("任务管理")])])}],!1,null,"55576a8e",null));C.options.__file="index.vue";t.default=C.exports},fW1p:function(e,t,a){var r=a("Y7ZC"),n=a("E8gZ")(!1);r(r.S,"Object",{values:function(e){return n(e)}})},nhzr:function(e,t,a){a("fW1p"),e.exports=a("WEpk").Object.values}}]);