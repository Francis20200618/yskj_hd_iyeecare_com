(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-976c"],{"1p6w":function(t,e,i){"use strict";var n=i("ggYL");i.n(n).a},"93Qu":function(t,e,i){},OzGj:function(t,e,i){"use strict";var n=i("93Qu");i.n(n).a},SfHs:function(t,e,i){},Zb7X:function(t,e,i){"use strict";i.r(e);var n={components:{Tinymce:i("glbJ").a},name:"PlatformUserList",data:function(){return{is_dialog:!1,is_dialog1:!1,form:[],identification_list:[],choose_index:-1,mes_form:{title:"",link_name:""},describe:"",keyword:"",mul_title:"",title:"",times:"",mes_rules:{title:{required:!0,message:"请输入页面名称"},link_name:{required:!0,message:"请输入页面路径名"}},mes_rules1:{},pageSize:0,current_page:0,total:0}},created:function(){this.getData()},destroyed:function(){},mounted:function(){window.addEventListener("beforeunload",function(t){window.onbeforeunload=null})},methods:{choose:function(t){this.choose_index=t,this.choose_index<this.identification_list.length&&this.getRealData(this.choose_index)},copy:function(){this.$refs.link.select(),document.execCommand("Copy",!1),this.$message.success("复制成功")},openDialog:function(){this.is_dialog=!0,this.describe=this.form[this.choose_index].describe,this.keyword=this.form[this.choose_index].keyword,this.mul_title=this.form[this.choose_index].mul_title},addPane:function(){this.is_dialog1=!0,this.mes_form.title="",this.mes_form.link_name=""},sure:function(){this.form[this.choose_index].describe=this.describe,this.form[this.choose_index].keyword=this.keyword,this.form[this.choose_index].mul_title=this.mul_title,this.is_dialog=!1},sure1:function(){this.mes_form.title&&this.mes_form.link_name&&(this.form.push({identification:this.mes_form.link_name,name:this.mes_form.title,theme_id:this.$route.params.id}),this.is_dialog1=!1,this.choose_index=this.form.length-1)},getData:function(){var t=this;$http.post("/admin/user/dent_list",{theme_id:this.$route.params.id},"加载中").then(function(e){1==e.result?e.data.length>0&&(t.identification_list=e.data,t.identification_list.forEach(function(e,i){t.form.push({theme_id:e.theme_id,name:e.name,identification:e.identification})}),t.getRealData(0)):e.msg&&""!=e.msg&&t.$message.error(e.msg)}).catch(function(){})},getRealData:function(t){var e=this;$http.post("/admin/user/multiple_list",{theme_id:this.$route.params.id,identification:this.identification_list[t].identification},"加载中").then(function(i){1==i.result?(e.form[t]={theme_id:i.data.theme_id,describe:i.data.describe,detail:i.data.detail,identification:i.data.identification,name:i.data.name,mul_title:i.data.mul_title,keyword:i.data.keyword,url:i.data.url},e.choose_index=t,e.$forceUpdate(),console.log(e.form)):i.msg&&""!=i.msg&&e.$message.error(i.msg)}).catch(function(){})},submitForm:function(t){var e=this;if(this.form.length<=0)return this.$message.error("请添加设置页面"),!1;var i={theme_id:this.form[this.choose_index].theme_id,identification:this.form[this.choose_index].identification,data:this.form[this.choose_index]};delete i.data.theme_id,delete i.data.identification,$http.post("/admin/user/multiple_list",i,"保存中").then(function(t){1===t.result?(e.$message.success("保存成功！"),window.location.reload()):(e.form[e.choose_index].theme_id=i.theme_id,e.form[e.choose_index].identification=i.identification,t.msg&&""!=t.msg&&(t.msg instanceof Array==1?e.$message.error(t.msg[0]):e.$message.error(t.msg)))}).catch(function(){e.form[e.choose_index].theme_id=i.theme_id,e.form[e.choose_index].identification=i.identification})}}},s=(i("1p6w"),i("KHd+")),o=Object(s.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[i("div",{staticClass:"right-head"},[i("div",{staticClass:"right-head-con"},[t._v("页面列表")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.addPane}},[t._v("添加页面\n    ")])],1),t._v(" "),i("div",{staticStyle:{"font-size":"14px",padding:"20px 0",color:"red","line-height":"24px"}},[t._v("\n    提示：每次提交保存只能保存当前页面，请保存当前页面后再添加/编辑别的页面，已免保存失败！\n  ")]),t._v(" "),t.form.length>0?i("div",{staticClass:"content",staticStyle:{display:"flex"}},[i("div",{staticClass:"left"},t._l(t.form,function(e,n){return i("div",{key:n,staticClass:"left-li",class:{"left-li-select":n==t.choose_index},on:{click:function(e){t.choose(n)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])})),t._v(" "),i("div",{staticStyle:{flex:"1"}},[i("div",{staticStyle:{"padding-bottom":"10px"}},[t.form.length>0&&-1!=t.choose_index?i("el-input",{ref:"link",staticStyle:{width:"50%"},attrs:{type:"text",readonly:"readonly"},model:{value:t.form[t.choose_index].url,callback:function(e){t.$set(t.form[t.choose_index],"url",e)},expression:"form[choose_index].url"}}):t._e(),t._v(" "),i("el-button",{on:{click:t.copy}},[t._v("复制链接")]),t._v(" "),i("el-button",{on:{click:t.openDialog}},[t._v("页面信息设置")])],1),t._v(" "),t._l(t.form,function(e,n){return t.form.length>0?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form[n].detail,expression:"form[index].detail"},{name:"show",rawName:"v-show",value:t.choose_index==n,expression:"choose_index == index"}],key:n,staticStyle:{width:"90%",height:"70vh"},domProps:{value:t.form[n].detail},on:{input:function(e){e.target.composing||t.$set(t.form[n],"detail",e.target.value)}}}):t._e()})],2)]):t._e(),t._v(" "),i("el-button",{staticStyle:{margin:"50px 0 0 200px"},attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.submitForm("form")}}},[t._v("提交")]),t._v(" "),t.form.length>0?i("el-dialog",{attrs:{visible:t.is_dialog,width:"65%",center:""},on:{"update:visible":function(e){t.is_dialog=e}}},[i("div",[i("el-form",{ref:"mes_form",attrs:{model:t.mes_form,rules:t.mes_rules1,"label-width":"15%"}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入标题"},model:{value:t.mul_title,callback:function(e){t.mul_title=e},expression:"mul_title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关键词"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入关键词"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:"5",placeholder:"请输入描述"},model:{value:t.describe,callback:function(e){t.describe=e},expression:"describe"}})],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.is_dialog=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("确 定 ")])],1)]):t._e(),t._v(" "),i("el-dialog",{attrs:{visible:t.is_dialog1,width:"65%",title:"添加页面",center:""},on:{"update:visible":function(e){t.is_dialog1=e}}},[i("div",[i("el-form",{ref:"mes_form",attrs:{model:t.mes_form,rules:t.mes_rules,"label-width":"15%"}},[i("el-form-item",{attrs:{label:"页面名称",prop:"title"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入页面名称"},model:{value:t.mes_form.title,callback:function(e){t.$set(t.mes_form,"title",e)},expression:"mes_form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"页面路径名",prop:"link_name"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入页面路径名"},model:{value:t.mes_form.link_name,callback:function(e){t.$set(t.mes_form,"link_name",e)},expression:"mes_form.link_name"}}),t._v(" "),i("div",{staticClass:"tip"},[t._v("在链接中定义的路径名称!")])],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.is_dialog1=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sure1}},[t._v("确 定 ")])],1)])],1)},[],!1,null,null,null);o.options.__file="list.vue";e.default=o.exports},ggYL:function(t,e,i){},glbJ:function(t,e,i){"use strict";var n=i("4d7F"),s=i.n(n),o=i("GQeE"),a=i.n(o),l={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return a()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=a()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,n=a()(this.listObj),s=0,o=n.length;s<o;s++)if(this.listObj[n[s]].uid===i)return this.listObj[n[s]].url=t.data.success,void(this.listObj[n[s]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=a()(this.listObj),n=0,s=i.length;n<s;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new s.a(function(s,o){var a=new Image;a.src=i.createObjectURL(t),a.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},s(!0)})}}},r=(i("lvT4"),i("KHd+")),c=Object(r.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"/admin/all/upload","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"56de81d2",null);c.options.__file="editorImage.vue";var d=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],u=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],m={name:"Tinymce",components:{editorImage:c.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:u,menubar:this.menubar,plugins:d,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},h=(i("OzGj"),Object(r.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"4b42c7ad",null));h.options.__file="index.vue";e.a=h.exports},lvT4:function(t,e,i){"use strict";var n=i("SfHs");i.n(n).a}}]);